<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
        @font-face {
            font-family: FoundersGrotesk;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Light.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Light.woff2") format("woff2");
            font-weight: 100;
            font-style: normal;
        }

        @font-face {
            font-family: FoundersGrotesk;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-LightItalic.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-LightItalic.woff2") format("woff2");
            font-weight: 100;
            font-style: italic;
        }

        @font-face {
            font-family: FoundersGrotesk;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Regular.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Regular.woff2") format("woff2");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: FoundersGrotesk;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Medium.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskWeb-Medium.woff2") format("woff2");
            font-weight: 500;
            font-style: normal;
        }

        @font-face {
            font-family: FoundersGroteskCond;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskCondensedWeb-Light.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskCondensedWeb-Light.woff2") format("woff2");
            font-weight: 100;
            font-style: normal;
        }

        @font-face {
            font-family: FoundersGroteskCond;
            src: url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskCondensedWeb-Bold.woff") format("woff"), url("https://www.dutchdesignfoundation.com/wp-content/themes/ddf/dist/assets/fonts/FoundersGroteskCondensedWeb-Bold.woff2") format("woff2");
            font-weight: 700;
            font-style: normal;
        }

        body {
            display: flex;
            font-family: "FoundersGrotesk", Arial, sans-serif;
            font-size: 18px;
            line-height: 1.3;
        }

        form {
            max-width: 1000px;
            margin: auto auto 30px auto;
        }

        .success {
            max-width: 1000px;
            margin: 30px auto;
        }

        .hidden {
            display: none;
        }

        .submit-btn {
            background-color: #3b46f0;
        }

        .submit-btn.submit-btn__loading {
            background-color: #9c9cee;
        }

        .logo-icon {
            text-align: right;
            padding-right: 20px;
            color: #3b46f0;
        }

        .logo-text {
            font-size: 40px;
            font-weight: 400;
        }

        .error {
            color: red;
        }

        input[type='radio']:after {
            width: 15px;
            height: 15px;
            border-radius: 15px;
            top: -4px;
            left: -4px;
            position: relative;
            background-color: #d1d3d1;
            content: '';
            display: inline-block;
            visibility: visible;
            border: 2px solid #d1d3d1;
        }

        input[type='radio']:checked:after {
            width: 15px;
            height: 15px;
            border-radius: 15px;
            top: -4px;
            left: -4px;
            position: relative;
            background-color: #3b46f0;
            content: '';
            display: inline-block;
            visibility: visible;
            border: 2px solid #d1d3d1;
        }
        input[type='checkbox'] {
            width: 22px !important;
            height: 22px !important;
            margin: 0 5px;
            -webkit-appearance: none;
            -moz-appearance: none;
            -o-appearance: none;
            appearance: none;
            outline: none;
            border: 2px solid #d1d3d1;
            border-radius: 2px;
            box-shadow: none;
            font-size: 2em;
        }
        input[type='checkbox']:checked {
            background-color: #3b46f0;
        }
        input[type='checkbox']:checked:after {
            content: '\2713';
            color: white;
            position: absolute;
            line-height: 16px;
            font-size: 16px;
            padding-left: 3px;
            padding-top: 1px;
        }
        input[type='text']:read-only {
            background-color: #d1d3d1;
            border: 1px solid black;
            border-radius: 3px;
            padding: 3px;
        }
    </style>
</head>
<body>
<script runat="server">
  Platform.Load("core", "1");
  try {
</script>
<!--%%[
var @rows, @row, @rowCount, @prefid, @subId, @job, @listId

set @prefid = Base64Decode(RequestParameter('prefid'),'UTF-8');
set @subId = Base64Decode(RequestParameter('subid'),'UTF-8');
set @job = Base64Decode(RequestParameter('job'),'UTF-8');
set @listId = Base64Decode(RequestParameter('listid'),'UTF-8');

set @rows = RetrieveSalesforceObjects("Individual", "PBNews_p__c,PBWebshop_p__c,PbSms_p__c,X4BNews_p__c,X4BSms_p__c,WWNews_p__c,WWJobsalerts_p__c,WWSms_p__c","Id","=",
@prefid)
set @rowCount = rowcount(@rows)

if @rowCount > 0 then
var @PBNews, @PBWebshop, @PbSms, @X4BNews, @X4BSms, @WWNews, @WWJobsalerts, @WWSms
set @row = row(@rows, 1) /* only use first row */
set @FirstName = field(@row,"FirstName")
set @LastName = field(@row,"LastName")
set @Email = field(@row,"Email")
set @Language = field(@row,"Language__c")
set @DutchDesignFoundation = field(@row,"Dutch_Design_Foundation__c")
set @DutchDesignFoundation = field(@row,"Dutch_Design_Week__c")
set @WWJobsalerts = field(@row,"WWJobsalerts_p__c"),
set @WWSms = field(@row,"WWSms_p__c")

]%% -->

<script>
  function showHide(elements, show) {
    for (x of elements) {
      if (show || (show === undefined && x.style.display === "none")) {
        x.style.display = "inline-block";
      } else {
        x.style.display = "none";
      }
    }
  }
</script>

<form action="https://cloud.info.xxxxx.com/preference-handler" method="post" class="preferences-form">
    <input type="hidden" id="refId" name="refId" value="%%=v(@prefid)=%%">
    <input type="hidden" id="subId" name="subId" value="%%=v(@subId)=%%">
    <input type="hidden" id="job" name="job" value="%%=v(@job)=%%">
    <input type="hidden" id="listId" name="listId" value="%%=v(@listId)=%%">
    <table style="margin:40px auto 20px; line-height: 1">
        <tbody>
        <tr>
            <td class="logo-icon">
                <svg id="icon-logo" viewBox="0 0 35 25" width="75px">
                    <path fill="currentColor" fill-rule="evenodd" d="M0 0v5.358h14.006V25h5.369V5.358H29.63V25H35V0z"></path>
                </svg>
            </td>
            <td class="logo-text">Dutch Design<br>Foundation</td>
        </tr>
        </tbody>
    </table>
    <p>
        Welkom bij het preference centre van Dutch Design Foundation (DDF). Hieronder kun je je
        voorkeuren doorgeven m.b.t. nieuwsbrieven van DDF en alle onderliggende labels. We zijn
        benieuwd naar jouw interesses. Hoe specifieker je onderstaand formulier invult, hoe
        relevanter wij onze content voor jou kunnen maken.
    </p>
    <div>
        <div>Voornaam: <input type="text" value="%%=v(@FirstName)=%%" readonly></div>
        <div>Achternaam: <input type="text" value="%%=v(@LastName)=%%" readonly></div>
        <div>E-mailadres: <input type="text" value="%%=v(@Email)=%%" readonly></div>
        <div>Voorkeustaal:
            <fieldset style="border: none; font-size:16px;">
                <table role="presentation">
                    <tbody>
                    <tr>
                        <td>
                            <input type="radio" %%=v(Iif(@Language == 'Nederlands', 'checked', ''))=%% name="Language__c" id="Language_nederlands" value="Nederlands" disabled>
                            <label for="Language_nederlands" style="margin-right: 10px;">Nederlands</label>
                        </td>
                        <td>
                            <input type="radio" %%=v(Iif(@Language == 'English', 'checked', ''))=%% name="Language__c" id="Language_english" value="English" disabled>
                            <label for="Language_english" style="margin-right: 10px;">Engels</label>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>
    <p>
        Dutch Design Foundation (DDF) biedt een podium aan ontwerpers die de wereld een betere
        plek willen maken. Met dat als uitgangspunt realiseren we kansen, ondersteuning, publiciteit
        en een platform vanuit onze verschillende labels: Dutch Design Week, Dutch Design
        Awards, World Design Embassies en What if Lab. We stellen onszelf daarbij altijd een
        dubbele opgave: We versterken de positie en betekenis van Nederlandse ontwerpers en we
        laten zien hoe ontwerpers wereldwijd vormgeven aan een positieve toekomst.
    </p>
    <h3 class="hidden error">Er heeft zich een fout voorgedaan, je voorkeuren zijn niet opgeslagen.</h3>
    <p>
        Ik wil graag op de hoogte blijven van:
    </p>
    <div>
        <h4 style="margin-bottom: 5px;">Dutch Design Foundation</h4>
        <fieldset style="border: none;">
            <table role="presentation" style="font-size:16px;">
                <tbody>
                <tr>
                    <td>
                        <input type="radio" %%=v(Iif(@DutchDesignFoundation == 'Yes', 'checked', ''))=%% name="Dutch_Design_Foundation__c" id="Dutch_Design_Foundation__c_yes"
                        value="Yes">
                        <label for="Dutch_Design_Foundation__c_yes" style="margin-right: 10px;">Ja</label>
                    </td>
                    <td>
                        <input type="radio" %%=v(Iif(@DutchDesignFoundation == 'No', 'checked', ''))=%% name="Dutch_Design_Foundation__c" id="Dutch_Design_Foundation__c_no"
                        value="No">
                        <label for="Dutch_Design_Foundation__c_no" style="margin-right: 10px;">Neen</label>
                    </td>
                </tr>
                </tbody>
            </table>
        </fieldset>
    </div>
    <div>
        <h4 style="margin-bottom: 5px;">Dutch Design Week</h4>
        <fieldset style="border: none;">
            <table role="presentation" style="font-size:16px;">
                <tbody>
                <tr>
                    <td>
                        <input type="radio" %%=v(Iif(@Dutch_Design_Week == 'Yes', 'checked', ''))=%% name="Dutch_Design_Week__c" id="Dutch_Design_Week__c_yes"
                        value="Yes" onchange="showHide([document.getElementById('designWeekExtra')], true)">
                        <label for="Dutch_Design_Week__c_yes" style="margin-right: 10px;">Ja</label>
                    </td>
                    <td>
                        <input type="radio" %%=v(Iif(@Dutch_Design_Week == 'No', 'checked', ''))=%% name="Dutch_Design_Week__c" id="Dutch_Design_Week__c_no" value="No"
                        onchange="showHide([document.getElementById('designWeekExtra')], false)">
                        <label for="Dutch_Design_Week__c_no" style="margin-right: 10px;">Neen</label>
                    </td>
                </tr>
                </tbody>
            </table>
        </fieldset>
        <div style="margin-left: 1rem; margin-top: 10px;%%=v(Iif(@Dutch_Design_Week == 'yes', 'display:inline-block', 'display:none'))=%%" id="designWeekExtra">
            <div onclick="showHide([document.getElementById('designWeekExtraContent'),
            document.getElementById('weekCarretRight'), document.getElementById('weekCarretDown')])">
                <svg id="weekCarretRight" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em"
                     height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet"
                     viewBox="0 0 8 8">
                    <path d="M2 0v8l4-4l-4-4z" fill="#000000"/>
                </svg>
                <svg id="weekCarretDown" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em"
                     height="1em" style="display:none; -ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                     preserveAspectRatio="xMidYMid meet" viewBox="0 0 8 8">
                    <path d="M0 2l4 4l4-4H0z" fill="#000000"/>
                </svg>
                In welke onderwerpen ben je het meest geïnteresseerd?
            </div>
            <div style="margin: 1rem 0 1rem 1rem;">
                <div id="designWeekExtraContent" style="display: none;">
                    <div>
                        <input type="checkbox" %%=v(Iif(IndexOf(@DDWTopics,'Artistieke')> 0, 'checked', ''))=%% name="DDW_Topics__c_art"
                        id="DDW_Topics__c_art">
                        <label for="DDW_Topics__c_art">Artistieke verkenning en vorming</label>
                    </div>
                    <div>
                        <input type="checkbox" %%=v(Iif(IndexOf(@DDWTopics,'Creatief')> 0, 'checked', ''))=%% name="DDW_Topics__c_crea"
                        id="DDW_Topics__c_crea">
                        <label for="DDW_Topics__c_crea">Creatief vakmanschap en productontwerk</label>
                    </div>
                    <div>
                        <input type="checkbox" %%=v(Iif(IndexOf(@DDWTopics,'Innovatieve')> 0, 'checked', ''))=%% name="DDW_Topics__c_inno"
                        id="DDW_Topics__c_inno">
                        <label for="DDW_Topics__c_inno">Innovatieve oplossingen voor de wereld van vandaag</label>
                    </div>
                    <div>
                        <input type="checkbox" %%=v(Iif(IndexOf(@DDWTopics,'Speculatieve')> 0, 'checked', ''))=%% name="DDW_Topics__c_specu"
                        id="DDW_Topics__c_specu">
                        <label for="DDW_Topics__c_specu">Speculatieve ideeën voor de wereld van morgen</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <input id="submitBtn" class="submit-btn" type="submit" value="Opslaan"
           style="float:right; margin-right:2%; font-size:23px; padding:10px 20px 10px 20px; color:white; border:none;">
</form>
<!--
%%[ else ]%%
Gegevens niet gevonden.
%%[ endif ]%%
<div class="success hidden">
    <table>
        <tbody>
        <tr>
            <td>
                <img src="https://image.info.poetsbureau.be/lib/fe3c11717564047d711174/m/1/dbf224f3-5175-436b-a520-5ad823ca22ca.png" alt="banner" title="banner" width="100%">
            </td>
        </tr>
        <tr>
            <td>
                <h1 style="margin: 4% 0;">
                    Je voorkeuren zijn succesvol opgeslagen. Je mag deze pagina sluiten.
                </h1>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<script runat="server">
    }
    catch (err) {
        Variable.SetValue("@errorMessage", Stringify(err.message) + Stringify(err.description));
        Write("Gegevens niet gevonden.");
    }
</script>
<script runat="client">
    console.log(`%%=v(@errorMessage)=%%`);
</script>
<script type="application/javascript">
    var form = document.querySelector('form');
    var submitBtn = document.querySelector('#submitBtn');

    if (form) {
        form.addEventListener("submit", postFormData);
    }

    function postFormData(e) {
        e.preventDefault();
        submitBtn.setAttribute("disabled", true);
        submitBtn.setAttribute("value", "Laden...");
        submitBtn.classList.add('submit-btn__loading');

        var payload = {};
        var formData = new FormData(form);
        for (var pair of formData.entries()) {
            payload[pair[0]] = pair[1];
        }

        fetch(form.getAttribute("action"), {
            method: "POST",
            headers: {'Content-Type': 'application/json; charset=utf-8'},
            body: JSON.stringify(payload)
        })
            .then(function (result) {
                return result.text().then(function(text) {
                    text = text.substr(text.indexOf('{'), text.indexOf('<') - text.indexOf('{'));
                    return JSON.parse(text);
                })
                    .then(function (data) {
                        toggleMessage(data.Status);
                    })
                    .catch(function (error) {
                        toggleMessage('Error');
                    });
            });
    }

    function toggleMessage(status) {
        if(status == 'OK') {
            form.classList.add("hidden");
            var successMessage = document.querySelector('.success');
            successMessage.classList.remove("hidden");
        } else {
            var errorMessage = form.querySelector('.error');
            errorMessage.classList.remove("hidden");
        }
        submitBtn.removeAttribute("disabled");
        submitBtn.setAttribute("value", "Opslaan")
        submitBtn.classList.remove('submit-btn__loading');
    }
</script> -->
</body>
</html>
