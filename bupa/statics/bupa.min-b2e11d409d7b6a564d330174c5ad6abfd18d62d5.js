angular.module("bupa.core.useful-documents",["cgBusy","ui.bootstrap","ui.bootstrap.tooltip","pasvaz.bindonce","mgcrea.ngStrap.modal","bupa.common.translations"]),angular.module("bupa.core.useful-documents").directive("bpUsefulDocuments",function(){"use strict";return{restrict:"E",scope:{hideEssentialNotes:"=",hideBenefitMaxima:"=",hideAppendices:"=",attachmentWrappers:"="},controller:"UsefulDocumentsCtrl",templateUrl:"/bupa/core/useful-documents/UsefulDocuments.html"}}),angular.module("bupa.core.useful-documents").controller("UsefulDocumentsCtrl",["APP_CONFIG","SFDC","$scope",function(e,t,a){"use strict";this.init=function(){a.APP_CONFIG=e},this.init()}]),angular.module("bupa.core.useful-links",["cgBusy","ui.bootstrap","ui.bootstrap.tooltip","pasvaz.bindonce","mgcrea.ngStrap.modal","bupa.common.translations"]),angular.module("bupa.core.useful-links").directive("bpUsefulLinks",function(){"use strict";return{restrict:"E",controller:"UsefulLinksCtrl",templateUrl:"/bupa/core/useful-links/UsefulLinks.html"}}),angular.module("bupa.core.useful-links").controller("UsefulLinksCtrl",["APP_CONFIG","SFDC","$scope","$q",function(e,t,a,o){"use strict";var n=this;this.init=function(){a.APP_CONFIG=e,a.usefulLinksCtrlFetch=n.fetch()},this.fetch=function(){return o.all([n.fetchUsefulLinks()])},this.fetchUsefulLinks=function(){return t.getUsefulLinksList().then(function(e){a.usefulLinks=e})},this.init()}]),angular.module("bupa.core.procedures",["bupa.common.translations","ui.router","ngLazyJs","ngTable","cgBusy","ui.bootstrap","ui.bootstrap.tooltip","pasvaz.bindonce","mgcrea.ngStrap.modal","bupa-templates","bupa.core.useful-documents","bupa.core.useful-links"]).config(["$stateProvider","APP_CONFIG","$tooltipProvider",function(e,t,a){"use strict";a.options({animation:!1}),e.state(t.states.PROCEDURES.name,{url:t.states.PROCEDURES.url,templateUrl:"/bupa/core/procedures/Procedures.html",controller:"BpProceduresCtrl"})}]),angular.module("bupa.core.procedures").service("bpProcedures",["ngLazy","$log","SFDC",function(e,t,a){"use strict";this.fetchChargeCodeSiteHelpTextCMap=function(){return a.getChargeCodeSiteHelpTextCMap()}}]),angular.module("bupa.core.procedures").controller("BpProceduresCtrl",["APP_CONFIG","Lazy","$scope","SFDC","ngTableParams","$log","$location","$filter","$window","$q","$timeout","bpSharedCode","$sce","bpProcedures",function(e,t,a,o,n,r,i,c,s,l,d,u,p,h){"use strict";var g=this,b=u;this.allChargeCode=[],this.allChargeCodeSchedule=[],this.chapterFiltered=[],this.init=function(){a.APP_CONFIG=e,a.SharedCode=u,a.bpProceduresCtrlFetch=g.fetch(),a.allChapters=[{val:" --------------   Click here to view chapter pick list:   -------------- ",number:"0"}],a.chapterNumber="0",a.isChapterShow=!1,a.isLoading=!1,a.hideOnInit=!0,a.showSubSection={},a.isMac=b.isMac(),a.purchasedCodeCharges=b.getPurchasedChargeCodes(),g.servType=void 0,a.services=[{ServiceID:1,ServiceName:"Surgeon",PriceField:"Surgeon_Price__c",CalculatedPriceField:"Surgeon_Price"},{ServiceID:2,ServiceName:"Anaesthetist",PriceField:"Anaesthetist_Price__c",CalculatedPriceField:"Anaesthetist_Price"}],a.defaultService=a.services[0],a.Calculated=!1,a.$watch("filter",g.onSearchTextChanged)},this.fetch=function(){return l.all([g.legacyCombinedFetch(),g.fetchProceduresAttachmentWrappers(),g.fetchChaptersDescriptionsLegacy(),g.fetchChargeCodeSiteHelpTextCs()])},this.fetchChaptersDescriptionsLegacy=function(){return o.getChaptersDescription().then(g.initAllChaptersDescription)},this.initAllChaptersDescription=function(e){a.allChaptersDescription={};for(var t in e)a.allChaptersDescription[t]=p.trustAsHtml(e[t]);return e},this.fetchChargeCodeSiteHelpTextCs=function(){return h.fetchChargeCodeSiteHelpTextCMap().then(function(e){a.chargeCodeSiteHelpTextCMap=e})},this.fetchProceduresAttachmentWrappers=function(){return o.getProcedureAttachmentWrapperList().then(function(e){a.procedureAttachments=e})},this.legacyCombinedFetch=function(){return l.all({chargeCode:o.getChargeCode(),chargeCodeSchedule:o.getChargeCodeSchedule(),helpTexts:o.getChargeCodeSiteHelpText(),allUnbundlings:o.getUnbundling()}).then(function(e){e=b.handleInitResponse(e,!0),b.initScope(a,e),g.allChargeCode=e.chargeCode,g.allChargeCodeSchedule=e.chargeCodeSchedule,a.allUnbundling=e.allUnbundlings})},this.doSearchByText=function(){a.hideOnInit=!1,r.debug('Starting search with search text: "',a.filter,'"'),a.tableParams.page(1),a.tableParams.reload()},this.onSearchTextChanged=function(e,t){(angular.isString(e)||angular.isString(t))&&g.doSearchByText()},a.getUnbundlingCode=function(e){a.unbundlingCode=e.Name,a.unbundlingDesc=e.Description__c},a.showUnbundling=function(e){var t=e.Id,o=a.allUnbundling[t];return{items:o}},a.getServiceType=function(e){g.servType=e,a.displayPrice="Surgeon"===e;for(var t=0;t<a.purchasedCodeCharges.length;t++)a.purchasedCodeCharges[t].adjustedPrice=null,a.purchasedCodeCharges[t].messageText=null;a.clearCalculatedList(),a.Calculated=!1,a.total=null},a.sortChapters=b.sortChapters,a.shoppingCartCalcFull=function(e){var t=[];a.loading=!0,console.log("cartitems"+e),angular.forEach(e,function(e){t.push(e.Id)}),console.log(t),angular.isUndefined(g.servType)&&(g.servType=a.services[0].ServiceName),t.push(g.servType);var o=angular.toJson(t);console.log("selected codes"+t),console.log("selected codes as json"+o),r.debug("ProcedureCtrl - Calling InRule with input: ",t,"   =>   ",o),s.ChargeCodeHomeController.getJSONListFull(o,function(e,t){r.debug("ProcedureCtrl - InRule response => "),r.debug("ProcedureCtrl - result: ",e),r.debug("ProcedureCtrl - event: ",t),console.log("ProcedureCtrl - InRule response => "),console.log("ProcedureCtrl - result: ",e),console.log("ProcedureCtrl - event: ",t),a.loading=!1,d(function(){a.total=null,a.total=e.totalPrice,console.log("the basket",a.purchasedCodeCharges),a.viewResult=e.details,console.log("the result",a.viewResult);var t=a.purchasedCodeCharges.length,o=a.viewResult.length;console.log("len "+t),console.log("reslen"+o);for(var n=0;o>n;n++){console.log("in loop 1 "+a.viewResult[n].code);for(var r=0;t>r;r++)console.log(a.viewResult[n].code+"in loop 2 "+a.purchasedCodeCharges[r].Name),a.viewResult[n].code==a.purchasedCodeCharges[r].Name&&(a.viewResult[n].Description=a.purchasedCodeCharges[r].Description__c)}a.Calculated=!0},2e3)},{buffer:!0,escape:!1,timeout:5e4})},a.clearSelection=function(){a.isChapterShow=!1,a.chapterNumber="0",a.hideOnInit=!0,a.tableParams.reload(),a.tableParams.total(0)},a.backToMain=function(){b.backToMain(a,g.allChargeCode)},a.addItem=function(e){a.Calculated&&a.clearCalculatedList(),a.total=null,a.cartIsOpen=!0,e.isPurchased=!0,b.addPurchasedChargeCode(e,a.allUnbundling),a.purchasedCodeCharges=b.getPurchasedChargeCodes()},a.removeItem=function(e){console.log("removeItem"+e.Name),a.total=null,a.clearCalculatedList(),b.removePurchasedChargeCode(e.Name,a.allUnbundling),console.log("returned from shared code"),console.log(a.purchasedCodeCharges),console.log("cheching length"),console.log(a.purchasedCodeCharges.length),(void 0===a.purchasedCodeCharges.length||a.purchasedCodeCharges.length<=0)&&(console.log("inside if"),a.closeShoppingCart()),a.refreshThis()},a.removeCaluclatedItem=function(e,t){console.log("calculated"),console.log(a.viewResult),console.log("basket"),console.log(a.purchasedCodeCharges),console.log("removeCalculatedItem "+e.code),console.log("other "+t);for(var o=a.viewResult.length-1;o>=0;o--)if(a.viewResult[o].code===e.code){console.log("removing code matched code"+e.code+" matched name"+a.viewResult[o].code),a.viewResult.splice(o,1),console.log("calculated list"),console.log(a.viewResult);break}b.removePurchasedChargeCode(e.code,a.allUnbundling),a.total=null,a.Calculated=!1,a.clearCalculatedList(),a.refreshThis()},a.clearCart=function(){console.log("clear cart"),a.clearCalculatedList();for(var e=a.purchasedCodeCharges.length-1;e>=0;e--)a.purchasedCodeCharges[e].isPurchased=!1,b.removePurchasedChargeCode(a.purchasedCodeCharges[e].Name,a.allUnbundling);a.total=null},a.clearCalculatedList=function(){if(a.viewResult){console.log("clearCalculatedList");for(var e=a.viewResult.length-1;e>=0;e--)a.viewResult.splice(e,1);a.Calculated=!1}},a.refreshThis=function(){a.purchasedCodeCharges={},d(function(){a.purchasedCodeCharges=b.getPurchasedChargeCodes()},100)},a.chapters={},a.chapters.showChapter=function(e){e>0?(r.debug("showChapter Method",e),a.filter=null,a.isLoading=!0,a.hideOnInit=!1,d(function(){a.chapterNumber=e,a.currentChapter=t(a.allChapters).findWhere({number:e}).val,i.search("chapter",e),a.isChapterShow=!0,s.scrollTo(0,0),a.showSubSection={},a.tableParams.page(1);var o=g.allChargeCodeSchedule[a.currentChapter];if(g.chapterFiltered=[],r.debug("chargeCodeScheduleOfChapter length:",o.length),o.length)for(var n=o.length-1;n>=0;n--)for(var c=g.allChargeCode.length-1;c>=0;c--)if(o[n].ChargeCode__c===g.allChargeCode[c].Id){var l=angular.copy(g.allChargeCode[c]);l.SubSectionName__c=o[n].SubSectionName__c,(""===o[n].SubSectionName__c||null===o[n].SubSectionName__c)&&(l.SubSectionName__c=o[n].Section_Name__c.replace("Appendix E:","")),g.chapterFiltered.push(l)}a.tableParams.reload(),a.isLoading=!1},1,!1)):a.clearSelection()},a.tableParams=new n({page:1,count:15,sorting:{SubSectionName__c:"asc",Name:"asc"}},{groupBy:function(e){return a.isChapterShow===!0?e.SubSectionName__c:""},counts:[],total:0,getData:function(e,t){a.showSubSection={};var o;o=a.isChapterShow===!0?g.chapterFiltered:g.allChargeCode;var n=a.filter?a.filter.toLowerCase():"",i=a.filter?c("filter")(o,function(e){return!(-1===e.Name.toLowerCase().indexOf(n)&&-1===e.Description__c.toLowerCase().indexOf(n))}):o,s=t.sorting()?c("orderBy")(i,t.orderBy()):o;a.hideOnInit!==!0&&t.total(s.length),s=s.slice((t.page()-1)*t.count(),t.page()*t.count()),r.info("Ordered data shown in the table:",s),e.resolve(s)}}),a.closeShoppingCart=function(){r.debug("ENTERING closeShoppingCart()");var e=document.getElementById("shoppingCartDiv"),t=e.getAttribute("class");e&&"visible"===t&&e.setAttribute("class","hidden"),r.debug("EXITING closeShoppingCart()",e)},a.openShoppingCart=function(){r.debug("ENTERING openShoppingCart()");var e=document.getElementById("shoppingCartDiv"),t=e.getAttribute("class");e&&"hidden"===t&&e.setAttribute("class","visible"),r.debug("EXITING openShoppingCart()",e)},a.toggleShoppingCart=function(){r.debug("ENTERING toggleShoppingCart()");var e=document.getElementById("shoppingCartDiv"),t=e.getAttribute("class");e&&("hidden"===t?e.setAttribute("class","visible"):e.setAttribute("class","hidden")),r.debug("EXITING toggleShoppingCart()",e)},this.init()}]),angular.module("bupa.core.essential-notes",["bupa.common","ngLazyJs","cgBusy","mgcrea.ngStrap.modal"]),angular.module("bupa.core.essential-notes").service("bpEssentialNotes",["ngLazy","$log","SFDC",function(e,t,a){"use strict";var o=this;this.fetchEssentialNotes=function(){return a.getScheduleChapterCList().then(function(t){return e(t).filter(o.appendicesPredicate).value()})},this.appendicesPredicate=function(e){return"Essential Notes"===e.Type__c}}]),angular.module("bupa.core.essential-notes").controller("EssentialNotesCtrl",["SFDC","$scope","$q","$log","bpEssentialNotes",function(e,t,a,o,n){"use strict";var r=this;this.init=function(){t.fetchPromise=r.fetch()},this.fetch=function(){return a.all([r.fetchEssentialNotes()])},this.fetchEssentialNotes=function(){return n.fetchEssentialNotes().then(function(e){t.essentialNotes=e})},this.init()}]),angular.module("bupa.core.home",["bupa.common","ui.router","bupa-templates"]).config(["$stateProvider","$urlRouterProvider","APP_CONFIG",function(e,t,a){"use strict";t.otherwise(a.states.HOME.url),e.state(a.states.HOME.name,{url:a.states.HOME.url,templateUrl:"/bupa/core/home/Home.html",controller:"BpHomeCtrl"})}]),angular.module("bupa.core.home").controller("BpHomeCtrl",["APP_CONFIG","$scope",function(e,t){"use strict";this.init=function(){t.APP_CONFIG=e},this.init()}]),angular.module("bupa.core.drugs",["bupa.common.translations","bupa-templates","ui.router","bupa.core.useful-documents","bupa.core.useful-links"]).config(["$stateProvider","APP_CONFIG",function(e,t){"use strict";e.state(t.states.DRUGS.name,{url:t.states.DRUGS.url,templateUrl:"/bupa/core/drugs/Drugs.html",controller:"BpDrugsCtrl"})}]),angular.module("bupa.core.drugs").service("bpDrugs",["$window",function(e){"use strict";return{getChargeCode:function(t){e.ChargeCodeHomeController.getChargeCodeDrugs(t,{escape:!1,buffer:!1})},getChargeCodeSchedule:function(t){e.ChargeCodeHomeController.getChargeCodeScheduleDrugs(t,{escape:!1,buffer:!1})},getChaptersDescription:function(t){e.ChargeCodeHomeController.getChaptersDescriptionDrgus(t,{escape:!1,buffer:!1})},getUnbundlingDiagnostic:function(t){e.ChargeCodeHomeController.getUnbundlingDrugs(t,{escape:!1,buffer:!1})}}}]),angular.module("bupa.core.drugs").controller("BpDrugsCtrl",["APP_CONFIG","$scope","bpDrugs","$log","ngTableParams","$filter","$q","$window","$location","$sce","$timeout","SFDC",function(e,t,a,o,n,r,i,c,s,l,d,u){"use strict";function p(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1}var h,g=this,b=[],C=[];this.init=function(){t.APP_CONFIG=e,t.fetchPromise=g.fetch(),t.allChapters=[{val:"--- Click here to view chapter pick list ---",number:"0"}],t._2MonthsAgo=(new Date).setMonth((new Date).getMonth()-2),t._6MonthsAgo=(new Date).setMonth((new Date).getMonth()-6),t.hideOnInit=!0,t.currentTime=new Date,t.chapterNumber="0",t.isChapterShow=!1,t.isLoading=!1,t.showSubSection={},a.getChargeCode(function(e,a){if(a.status){for(var n=e.length-1;n>=0;n--)if(e[n].ChargeCodeSchedule__r&&e[n].ChargeCodeSchedule__r.length>0){var r=e[n].ChargeCodeSchedule__r,i=r[r.length-1].Section_Name__c;if(i){for(var c='<a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+i+'" ng-click="showChapter(\''+i.split(" ")[0]+"')\">"+i.split(" ")[0]+"</a>",s=r.length-2;s>=0;s--)i===r[s].Section_Name__c?r.splice(s,1):(c+=', <a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+r[s].Section_Name__c+'" ng-click="showChapter(\''+r[s].Section_Name__c.split(" ")[0]+"')\">"+r[s].Section_Name__c.split(" ")[0]+"</a>",i=r[s].Section_Name__c);e[n].chapters=c}}b=e,o.debug("CH",e[0]),t.tableParams.reload(),g.refreshChapterView()}else o.error(a.message)}),a.getUnbundlingDiagnostic(function(e,a){a.status&&(t.allUnbundling=e)}),a.getChargeCodeSchedule(function(e,a){if(a.status){h=e;for(var n in e)t.allChapters.push({val:n,number:n.split(" ")[0]});g.refreshChapterView(),t.$apply()}else o.error(a.message)}),a.getChaptersDescription(function(e,a){if(a.status){t.allChaptersDescription={};for(var n in e)t.allChaptersDescription[n]=l.trustAsHtml(e[n]);t.$apply()}else o.error(a.message)})},this.fetch=function(){return i.all([g.fetchChargeCodeSiteHelpTextCs(),g.fetchDiagnosticAttachmentWrappers()])},this.fetchChargeCodeSiteHelpTextCs=function(){return u.getChargeCodeSiteHelpTextDiagnosticCMap().then(function(e){t.chargeCodeSiteHelpTextCMap=e})},this.fetchDiagnosticAttachmentWrappers=function(){return u.getDiagnosticAttachmentWrapperList().then(function(e){t.diagnosticAttachments=e})},this.refreshChapterView=function(){var e=s.search();o.debug("INIT METHOD",e),e.chapter&&t.allChapters&&(t.isChapterShow=!0,t.chapterNumber=e.chapter,t.showChapter(e.chapter))},t.clearSelection=function(){t.isChapterShow=!1,t.chapterNumber="0",t.hideOnInit=!0,t.tableParams.reload(),t.tableParams.total(0)},t.backToMain=function(){s.search("chapter",null),t.chapterNumber="0",t.isChapterShow=!1,t.tableParams.reload(),t.showSubSection={}},t.showChapter=function(e){e>0?(t.filter="",t.isLoading=!0,d(function(){t.hideOnInit=!1,t.chapterNumber=e;for(var a=t.allChapters.length-1;a>=0;a--)if(t.allChapters[a].val.split(" ")[0]===e){t.currentChapter=t.allChapters[a].val;break}o.debug("showChapter Method"),s.search("chapter",e),c.scrollTo(0,0),t.showSubSection={},t.isChapterShow=!0,t.tableParams.page(1),C=[],c.ChargeCodeHomeController.getChargeCodeDrugsNew(t.currentChapter,function(e){for(var a=e.length-1;a>=0;a--){var o=e[a].ChargeCodeSchedule__r,n=o[o.length-1].Section_Name__c;if(n){for(var r='<a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+n+'" ng-click="showChapter(\''+n.split(" ")[0]+"')\">"+n.split(" ")[0]+"</a>",i=o.length-2;i>=0;i--)n===o[i].Section_Name__c?o.splice(i,1):(r+=', <a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+o[i].Section_Name__c+'" ng-click="showChapter(\''+o[i].Section_Name__c.split(" ")[0]+"')\">"+o[i].Section_Name__c.split(" ")[0]+"</a>",n=o[i].Section_Name__c);e[a].chapters=r;var c=angular.copy(e[a]);c.SubSectionName__c=void 0===o[o.length-1].SubSectionName__c?n.replace(/[0-9]/g,""):o[o.length-1].SubSectionName__c,C.push(c)}}t.tableParams.reload(),t.isLoading=!1},function(e){o.error("Fail in legacy code: ",e),c.alert("An internal error has occurred. Please try refreshing your browser.")})},1,!1)):t.clearSelection()},t.getUnbundlingCode=function(e){t.unbundlingCode=e.Name,t.unbundlingDesc=e.Description__c},t.showUnbundling=function(e){angular.isUndefined(t.allUnbundling)&&a.getUnbundlingDiagnostic(function(e,a){a.status&&(t.allUnbundling=e)});var n=e.Id,r=t.allUnbundling[n];return"a0711000001chvcAAA"===n&&o.debug("Bundlings",n+"/"+r),{items:r}},t.sortChapters=function(e){var t=e.number;return p(t)?parseInt(t):e.val},t.$watch("filter",function(e,a){(e||a)&&(t.hideOnInit=!1,o.debug("in the filter"),t.tableParams.page(1),t.tableParams.reload())}),t.tableParams=new n({page:1,count:15,sorting:{SubSectionName__c:"asc",Name:"asc"}},{groupBy:function(e){return t.isChapterShow===!0?e.SubSectionName__c:""},counts:[],total:0,getData:function(e,a){t.showSubSection={};var n=t.isChapterShow===!0?C:b,i=t.filter?t.filter.toLowerCase():"",c=t.filter?r("filter")(n,function(e){return!(-1===e.Name.toLowerCase().indexOf(i)&&-1===e.Description__c.toLowerCase().indexOf(i))}):n,s=a.sorting()?r("orderBy")(c,a.orderBy()):n;t.hideOnInit!==!0&&a.total(s.length),s=s.slice((a.page()-1)*a.count(),a.page()*a.count()),o.info("Ordered data shown in the table:",s),e.resolve(s)}}),this.init()}]),angular.module("bupa.core.diagnostics",["bupa.common.translations","bupa-templates","ui.router","bupa.core.useful-documents","bupa.core.useful-links"]).config(["$stateProvider","APP_CONFIG",function(e,t){"use strict";e.state(t.states.DIAGNOSTICS.name,{url:t.states.DIAGNOSTICS.url,templateUrl:"/bupa/core/diagnostics/Diagnostics.html",controller:"BpDiagnosticsCtrl"})}]),angular.module("bupa.core.diagnostics").service("bpDiagnostics",["$window",function(e){"use strict";return{getChargeCode:function(t){e.ChargeCodeHomeController.getChargeCodeDiagnostic(t,{escape:!1,buffer:!1})},getChargeCodeSchedule:function(t){e.ChargeCodeHomeController.getChargeCodeScheduleDiagnostic(t,{escape:!1,buffer:!1})},getChaptersDescription:function(t){e.ChargeCodeHomeController.getChaptersDescriptionDiagnostic(t,{escape:!1,buffer:!1})},getUnbundlingDiagnostic:function(t){e.ChargeCodeHomeController.getUnbundlingDiagnostic(t,{escape:!1,buffer:!1})}}}]),angular.module("bupa.core.diagnostics").controller("BpDiagnosticsCtrl",["APP_CONFIG","$scope","bpDiagnostics","$log","ngTableParams","$filter","$q","$window","$location","$sce","$timeout","SFDC",function(e,t,a,o,n,r,i,c,s,l,d,u){"use strict";function p(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1}var h,g=this,b=[],C=[];this.init=function(){t.APP_CONFIG=e,t.fetchPromise=g.fetch(),t.allChapters=[{val:"--- Click here to view chapter pick list ---",number:"0"}],t._2MonthsAgo=(new Date).setMonth((new Date).getMonth()-2),t._6MonthsAgo=(new Date).setMonth((new Date).getMonth()-6),t.hideOnInit=!0,t.currentTime=new Date,t.chapterNumber="0",t.isChapterShow=!1,t.isLoading=!1,t.showSubSection={},a.getChargeCode(function(e,a){if(a.status){for(var n=e.length-1;n>=0;n--)if(e[n].ChargeCodeSchedule__r&&e[n].ChargeCodeSchedule__r.length>0){var r=e[n].ChargeCodeSchedule__r,i=r[r.length-1].Section_Name__c;if(i){for(var c='<a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+i+'" ng-click="showChapter(\''+i.split(" ")[0]+"')\">"+i.split(" ")[0]+"</a>",s=r.length-2;s>=0;s--)i===r[s].Section_Name__c?r.splice(s,1):(c+=', <a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+r[s].Section_Name__c+'" ng-click="showChapter(\''+r[s].Section_Name__c.split(" ")[0]+"')\">"+r[s].Section_Name__c.split(" ")[0]+"</a>",i=r[s].Section_Name__c);e[n].chapters=c}}b=e,o.debug("CH",e[0]),t.tableParams.reload(),g.refreshChapterView()}else o.error(a.message)}),a.getUnbundlingDiagnostic(function(e,a){a.status&&(t.allUnbundling=e)}),a.getChargeCodeSchedule(function(e,a){if(a.status){h=e;for(var n in e)t.allChapters.push({val:n,number:n.split(" ")[0]});g.refreshChapterView(),t.$apply()}else o.error(a.message)}),a.getChaptersDescription(function(e,a){if(a.status){t.allChaptersDescription={};for(var n in e)t.allChaptersDescription[n]=l.trustAsHtml(e[n]);t.$apply()}else o.error(a.message)})},this.fetch=function(){return i.all([g.fetchChargeCodeSiteHelpTextCs(),g.fetchDiagnosticAttachmentWrappers()])},this.fetchChargeCodeSiteHelpTextCs=function(){return u.getChargeCodeSiteHelpTextDiagnosticCMap().then(function(e){t.chargeCodeSiteHelpTextCMap=e})},this.fetchDiagnosticAttachmentWrappers=function(){return u.getDiagnosticAttachmentWrapperList().then(function(e){t.diagnosticAttachments=e})},this.refreshChapterView=function(){var e=s.search();o.debug("INIT METHOD",e),e.chapter&&t.allChapters&&(t.isChapterShow=!0,t.chapterNumber=e.chapter,t.showChapter(e.chapter))},t.clearSelection=function(){t.isChapterShow=!1,t.chapterNumber="0",t.hideOnInit=!0,t.tableParams.reload(),t.tableParams.total(0)},t.backToMain=function(){s.search("chapter",null),t.chapterNumber="0",t.isChapterShow=!1,t.tableParams.reload(),t.showSubSection={}},t.showChapter=function(e){e>0?(t.filter="",t.isLoading=!0,d(function(){t.hideOnInit=!1,t.chapterNumber=e;for(var a=t.allChapters.length-1;a>=0;a--)if(t.allChapters[a].val.split(" ")[0]===e){t.currentChapter=t.allChapters[a].val;break}o.debug("showChapter Method"),s.search("chapter",e),c.scrollTo(0,0),t.showSubSection={},t.isChapterShow=!0,t.tableParams.page(1),C=[],c.ChargeCodeHomeController.getChargeCodeDiagnosticNew(t.currentChapter,function(e){for(var a=e.length-1;a>=0;a--){var o=e[a].ChargeCodeSchedule__r,n=o[o.length-1].Section_Name__c;if(n){for(var r='<a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+n+'" ng-click="showChapter(\''+n.split(" ")[0]+"')\">"+n.split(" ")[0]+"</a>",i=o.length-2;i>=0;i--)n===o[i].Section_Name__c?o.splice(i,1):(r+=', <a tooltip-append-to-body="true" tooltip-placement="right" tooltip="'+o[i].Section_Name__c+'" ng-click="showChapter(\''+o[i].Section_Name__c.split(" ")[0]+"')\">"+o[i].Section_Name__c.split(" ")[0]+"</a>",n=o[i].Section_Name__c);e[a].chapters=r;var c=angular.copy(e[a]);c.SubSectionName__c=void 0===o[o.length-1].SubSectionName__c?n.replace(/[0-9]/g,""):o[o.length-1].SubSectionName__c,C.push(c)}}t.tableParams.reload(),t.isLoading=!1},function(e){o.error("Fail in legacy code: ",e),c.alert("An internal error has occurred. Please try refreshing your browser.")})},1,!1)):t.clearSelection()},t.getUnbundlingCode=function(e){t.unbundlingCode=e.Name,t.unbundlingDesc=e.Description__c},t.showUnbundling=function(e){angular.isUndefined(t.allUnbundling)&&a.getUnbundlingDiagnostic(function(e,a){a.status&&(t.allUnbundling=e)});var n=e.Id,r=t.allUnbundling[n];return"a0711000001chvcAAA"===n&&o.debug("Bundlings",n+"/"+r),{items:r}},t.sortChapters=function(e){var t=e.number;return p(t)?parseInt(t):e.val},t.$watch("filter",function(e,a){(e||a)&&(t.hideOnInit=!1,o.debug("in the filter"),t.tableParams.page(1),t.tableParams.reload())}),t.tableParams=new n({page:1,count:15,sorting:{SubSectionName__c:"asc",Name:"asc"}},{groupBy:function(e){return t.isChapterShow===!0?e.SubSectionName__c:""},counts:[],total:0,getData:function(e,a){t.showSubSection={};var n=t.isChapterShow===!0?C:b,i=t.filter?t.filter.toLowerCase():"",c=t.filter?r("filter")(n,function(e){return!(-1===e.Name.toLowerCase().indexOf(i)&&-1===e.Description__c.toLowerCase().indexOf(i))}):n,s=a.sorting()?r("orderBy")(c,a.orderBy()):n;t.hideOnInit!==!0&&a.total(s.length),s=s.slice((a.page()-1)*a.count(),a.page()*a.count()),o.info("Ordered data shown in the table:",s),e.resolve(s)}}),this.init()}]),angular.module("bupa.core.contact-us",["bupa.common.translations","ui.router","bupa-templates"]).config(["$stateProvider","APP_CONFIG",function(e,t){"use strict";e.state(t.states.CONTACT_US.name,{url:t.states.CONTACT_US.url,templateUrl:"/bupa/core/contact-us/ContactUs.html",controller:"ContactUsCtrl"})}]),angular.module("bupa.core.contact-us").service("bpContactUs",["APP_CONFIG","$q","$log","$window",function(e,t,a,o){"use strict";this.saveFeedback=function(e){a.debug("saveFeedback() theFeedback: ",e);var n=t.defer();return o.ChargeCodeHomeController.saveFeedback(e,function(e){a.debug("ChargeCodeHomeController.saveFeedback() => ",e),n.resolve(e)},function(e){a.error("Fail in ChargeCodeHomeController.saveFeedback: ",e),n.reject(e)}),n.promise}}]),angular.module("bupa.core.contact-us").controller("ContactUsCtrl",["APP_CONFIG","SFDC","$scope","$log","bpContactUs",function(e,t,a,o,n){"use strict";this.init=function(){a.APP_CONFIG=e},a.onContactUsFormSubmit=function(e,t){o.debug("Submitting feedback: ",e),o.debug("feedbackFormCtrl: ",t),t.$invalid||n.saveFeedback(e)["catch"](function(){a.requestSucceded=!1}).then(function(){a.requestSucceded=!0})},this.init()}]),angular.module("bupa.core.benefit-maxima",["bupa.common","ngLazyJs","cgBusy","mgcrea.ngStrap.modal"]),angular.module("bupa.core.benefit-maxima").service("bpBenefitMaxima",["SFDC",function(e){"use strict";this.fetchMaximaBenefits=function(){return e.getMaximaBenefit()}}]),angular.module("bupa.core.benefit-maxima").controller("BenefitMaximaCtrl",["$q","$scope","bpBenefitMaxima",function(e,t,a){"use strict";var o=this;this.init=function(){t.lengthBenefit=[1,2,3,4,5],t.fetchPromise=o.fetch()},this.fetch=function(){return e.all([o.fetchMaximaBenefits()])},this.fetchMaximaBenefits=function(){return a.fetchMaximaBenefits().then(function(e){t.maximaBenefits=e})},this.init()}]),angular.module("bupa.core.appendices",["bupa.common","ngLazyJs","cgBusy","mgcrea.ngStrap.modal"]),angular.module("bupa.core.appendices").service("bpAppendices",["ngLazy","SFDC",function(e,t){"use strict";var a=this;this.fetchAppendices=function(){return t.getScheduleChapterCList().then(function(t){return e(t).filter(a.appendicesPredicate).value()})},this.appendicesPredicate=function(e){return"Appendix"===e.Type__c}}]),angular.module("bupa.core.appendices").controller("AppendicesCtrl",["$q","$scope","bpAppendices",function(e,t,a){"use strict";var o=this;this.init=function(){t.fetchPromise=o.fetch()},this.fetch=function(){return e.all([o.fetchAppendices()])},this.fetchAppendices=function(){return a.fetchAppendices().then(function(e){t.appendices=e})},this.init()}]),angular.module("bupa.common.translations",["pascalprecht.translate"]).config(["$translateProvider","BP_VISUAL_FORCE_CUSTOM_LABELS",function(e,t){"use strict";var a=angular.extend({TITLE:"Hello",FOO:"This is a paragraph.",BUTTON_LANG_EN:"english"},t);e.translations("en",a),e.preferredLanguage("en")}]).constant("BP_VISUAL_FORCE_CUSTOM_LABELS",window.$SFDCLabels),angular.module("bupa.common.footer",["bupa.common.translations","config"]),angular.module("bupa.common.footer").controller("BpFooterCtrl",["APP_CONFIG","$scope",function(e,t){"use strict";this.init=function(){t.APP_CONFIG=e},this.init()}]),angular.module("bupa.common.navbar",["bupa.common.translations","config"]),angular.module("bupa.common.navbar").directive("bpNavBar",function(){"use strict";return{templateUrl:"/bupa/common/navbar/NavBar.html",controller:"NavBarCtrl",scope:{bupaNavBarClasses:"@",titleTextKey:"="}}}),angular.module("bupa.common.navbar").controller("NavBarCtrl",["APP_CONFIG","$scope","$state",function(e,t,a){"use strict";this.init=function(){t.$state=a,t.APP_CONFIG=e},this.init()}]),angular.module("ngLazyJs",[]).constant("Lazy",window.Lazy).constant("ngLazy",window.Lazy),angular.module("bupa.core",["bupa.core.home","bupa.core.procedures","bupa.core.diagnostics","bupa.core.contact-us","bupa.core.essential-notes","bupa.core.benefit-maxima","bupa.core.appendices","bupa.core.drugs"]),angular.module("bupa.core").factory("bpSharedCode",["$location","$log","$sce","$window",function(e,t,a,o){"use strict";function n(e){return!isNaN(e-0)&&null!==e&&""!==e&&e!==!1}function r(e){i(),c(e),s(),l()}function i(){for(var e=d.length-1;e>=0;e--)d[e].Surgeon_Price=d[e].Surgeon_Price__c||0,d[e].Anaesthetist_Price=d[e].Anaesthetist_Price__c||0,d[e].displayedName=d[e].Name}function c(e){for(var t=d.length-1;t>=0;t--){var a=e[d[t].Id];if(a)for(var o=a.length-1;o>=0;o--)for(var n=d.length-1;n>=0;n--)a[o].UnbundlingChargeCode__c===d[n].Id&&(d[n].Surgeon_Price__c&&d[n].Surgeon_Price__c<d[t].Surgeon_Price__c&&(d[n].Surgeon_Price=0),d[n].Anaesthetist_Price__c&&d[n].Anaesthetist_Price__c<d[t].Anaesthetist_Price__c&&(d[n].Anaesthetist_Price=0))}}function s(){var e="20310 not permitted to be charged for same date of service",a=function(a,n,r){for(var i=d.length-1;i>=0;i--)if(t.debug("purchasedCodeCharges[i].Name ",d[i]),o.Lazy(a).contains(d[i].Name)&&(d[i].Surgeon_Price||d[i].Anaesthetist_Price)){t.debug("passed first if:",r,"purchased code:",d);for(var c=d.length-1;c>=0;c--)o.Lazy(a).contains(d[c].Name)||d[c][n]===r||(d[i].Surgeon_Price=0,d[i].Anaesthetist_Price=0,"20310"===d[i].Name&&(t.debug("adding the special note..."),d[i].displayedName='<a tooltip="'+e+'">20310</a>'))}};a(["X3510","25040","X3800"],"Footnote_asterisk_read_only_for_SOP__c","*"),a(["20310"],"Footnote_ii__c","(ii)")}function l(){var e=0;o.Lazy(d).sortBy(function(e){return e.Surgeon_Price}).each(function(t,a){t.Surgeon_Price>0&&e++,e>=2&&a===d.length-2&&(t.Surgeon_Price/=2,t.Anaesthetist_Price/=2),a<d.length-2&&(t.Surgeon_Price=0,t.Anaesthetist_Price=0)})}var d=[];return{backToMain:function(t,a){t.isChapterShow=!1,e.search("chapter",null),t.chapterNumber="0",t.chargeCode=a,t.tableParams.reload(),t.showSubSection={}},sortChapters:function(e){var t=e.number;return n(t)?parseInt(t):e.val},handleInitResponse:function(e,t){var n=e.helpTexts,r=function(e,t){return'<a tooltip="'+e+'">'+t+"</a>"},i=function(e){var t=e.Section_Name__c.split(" ")[0];return"<a ng-click=\"chapters.showChapter('"+t+'\')" tooltip="'+e.Section_Name__c+'">'+t+"</a>"},c=function(e){return e&&o.Lazy(e).uniq("Section_Name__c").reject({Section_Name__c:void 0}).map(i).join(", ")},s=function(e,t){return a.trustAsHtml(("Cash Value"!==e?e+"<br>":"")+("-"!==e?"£"+t:""))},l=function(e){return e.Name+"<br/>"+(e.Footnote_i__c?r(n.Footnote_i__c.HelpText__c,e.Footnote_i__c):"")+(e.Footnote_ii__c?r(n.Footnote_ii__c.HelpText__c,e.Footnote_ii__c):"")+(e.Footnote_asterisk_read_only_for_SOP__c?r(n.Footnote_Asterik__c.HelpText__c,e.Footnote_asterisk_read_only_for_SOP__c):"")+(e.Footnote_R__c?r(n.Footnote_R__c.HelpText__c,e.Footnote_R__c):"")+(e.Footnote_X__c?r(n.Footnote_X__c.HelpText__c,e.Footnote_X__c):"")},d=function(e){return r(n[e.Anticipated_LOS__c]?n[e.Anticipated_LOS__c].HelpText__c:"",e.Anticipated_LOS__c)};return o.Lazy(e.chargeCode).each(function(e){e.chapters=c(e.ChargeCodeSchedule__r),e.nameFootnote=l(e),t&&(e.surgeon=s(e.Surgeons_Category__c,e.Surgeon_Price__c),e.anaes=s(e.Anaesthetists_Category__c,e.Anaesthetist_Price__c),e.anticipatedLOS=d(e)),e._template="default"}),o.Lazy(e.chargeCodeSchedule).pairs().map(function(e){o.Lazy(e[1]).each(function(e){e.chapters=c([e]),e.ChargeCode__r&&(t&&(e.surgeon=s(e.ChargeCode__r.Surgeons_Category__c,e.ChargeCode__r.Surgeon_Price__c),e.anaes=s(e.ChargeCode__r.Anaesthetists_Category__c,e.ChargeCode__r.Anaesthetist_Price__c),e.anticipatedLOS=d(e.ChargeCode__r)),e.nameFootnote=l(e.ChargeCode__r)),!e.SubSectionName__c&&angular.isString(e.Section_Name__c)&&(e.SubSectionName__c=e.Section_Name__c.replace(/[0-9]/g,""))})}).toArray(),e},initScope:function(t,a){t.chargeCode=a.chargeCode;for(var o in a.chargeCodeSchedule)t.allChapters.push({val:o,number:o.split(" ")[0]});
var n=e.search();n.chapter&&t.allChapters?(t.isChapterShow=!0,t.chapterNumber=n.chapter,t.chapters.showChapter(n.chapter)):t.chapterNumber="0"},isMac:function(){return o.navigator.platform.indexOf("Mac")>-1},getPurchasedChargeCodes:function(){return console.log("in get command",d),d},addPurchasedChargeCode:function(e,t){d.push(e),r(t)},removePurchasedChargeCode:function(e,t){console.log("removePurchasedChargeCode "+e);for(var a=d.length-1;a>=0;a--)if(d[a].Name===e){console.log("removing code matched code"+e+" matched name"+d[a].Name),d.splice(a,1),console.log(d);break}r(t)}}}]),angular.module("bupa.core").factory("SFDC",["APP_CONFIG","$q","$http","$log","$window","$timeout","$cacheFactory",function(e,t,a,o,n,r,i){"use strict";var c=this;this._cache=null,this.init=function(){c._cache=i("bupa.core.SFDC.cache"),c._preFetchIfConfigured()};var s=function(e){var a=t.defer();return e(function(e,t){t.status?a.resolve(e):(o.error(t.message),a.reject(t.message))},{escape:!1,buffer:!1}),a.promise},l=function(e){return a.get(e).then(function(t){o.debug(e," => Mock Response =>",t);var a=t.data,n=a.pop();return n.result})},d=function(e){var t=e.attachment;t.fileSizeInKB=t.BodyLength/1024,t.fileSizeInKB=Math.round(t.fileSizeInKB)},u=function(e){var t=e.attachment,a=t.Name;t.fileType=angular.isString(a)&&a.indexOf(".")>-1?a.substring(a.lastIndexOf(".")+1):""},p=function(e){return angular.forEach(e,d),angular.forEach(e,u),e},h={getChargeCodeSiteHelpText:function(){var e="getChargeCodeSiteHelpText",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getChargeCodeSiteHelpText);return c._cache.put(e,a),a},getChargeCode:function(){var t="getChargeCode",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getChargeCode)?l(e.mocks.PROD.getChargeCode):s(n.ChargeCodeHomeController.getChargeCode),c._cache.put(t,o),o},getChargeCodeSchedule:function(){var t="getChargeCodeSchedule",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getChargeCodeSchedule)?l(e.mocks.PROD.getChargeCodeSchedule):s(n.ChargeCodeHomeController.getChargeCodeSchedule),c._cache.put(t,o),o},getCodingRequest:function(){var e="getCodingRequest",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getCodingRequest);return c._cache.put(e,a),a},getUnbundling:function(){var t="getUnbundling",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getUnbundling)?l(e.mocks.PROD.getUnbundling):s(n.ChargeCodeHomeController.getUnbundling),c._cache.put(t,o),o},getChaptersDescription:function(){var t="getChaptersDescription",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getChaptersDescription)?l(e.mocks.PROD.getChaptersDescription):s(n.ChargeCodeHomeController.getChaptersDescription),c._cache.put(t,o),o},getMaximaBenefit:function(){var t="getMaximaBenefit",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getMaximaBenefit)?l(e.mocks.PROD.getMaximaBenefit):s(n.ChargeCodeHomeController.getMaximaBenefit),c._cache.put(t,o),o},getScheduleChapterCList:function(){var e="getScheduleChapterCList",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getScheduleChapterCList);return c._cache.put(e,a),a},getDiagnosticAttachmentWrapperList:function(){var e="getDiagnosticAttachmentWrapperList",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getDiagnosticAttachmentWrapperList);return c._cache.put(e,a),a.then(p)},getProcedureAttachmentWrapperList:function(){var t="getProcedureAttachmentWrapperList",a=c._cache.get(t);if(angular.isObject(a))return a;var o;return o=e.SF_ORG.IsSandbox&&angular.isString(e.mocks.PROD.getProcedureAttachmentWrapperList)?l(e.mocks.PROD.getProcedureAttachmentWrapperList):s(n.ChargeCodeHomeController.getProcedureAttachmentWrapperList),c._cache.put(t,o),o.then(p)},getUsefulLinksList:function(){var e="getUsefulLinksList",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getUsefulLinksList);return c._cache.put(e,a),a},getChargeCodeSiteHelpTextCMap:function(){var e="getChargeCodeSiteHelpTextCMap",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getChargeCodeSiteHelpTextCMap);return c._cache.put(e,a),a},getChargeCodeSiteHelpTextDiagnosticCMap:function(){var e="getChargeCodeSiteHelpTextDiagnosticCMap",t=c._cache.get(e);if(angular.isObject(t))return t;var a=s(n.ChargeCodeHomeController.getChargeCodeSiteHelpTextDiagnosticCMap);return c._cache.put(e,a),a}};return this._executeMethodByNameAsync=function(e){var t=h[e];angular.isFunction(t)?r(t,0):o.warn("APP_CONFIG defined a method to pre execute that does not exist: ",e)},this._preFetchIfConfigured=function(){e.backEndPreFetch&&angular.forEach(e.backEndPreFetch,c._executeMethodByNameAsync)},this.init(),h}]).run(["SFDC","APP_CONFIG","$window",function(e,t,a){"use strict";t.debugInfoEnabled&&(a.sfdcFactory=e)}]),angular.module("config",[]).constant("APP_CONFIG",angular.extend({name:"Bupa Code Search Tool",debugInfoEnabled:window.$SFDCServerSideRenderedConfig.SF_ORG.IsSandbox,debugLogEnabled:window.$SFDCServerSideRenderedConfig.SF_ORG.IsSandbox,minimumDelayInMsBetweenCodeSearch:50,minimumSearchTermLength:3,backEndPreFetch:["getChargeCodeSiteHelpText","getUnbundling","getChargeCodeSchedule","getChargeCode","getChaptersDescription","getUsefulLinksList","getProcedureAttachmentWrapperList","getChargeCodeScheduleDiagnostic","getChargeCodeDiagnostic","getUnbundlingDiagnostic","getChaptersDescriptionDiagnostic","getChargeCodeSiteHelpTextDiagnosticCMap"],states:{HOME:{name:"home",url:"/home",urlWithHash:"/#/home"},PROCEDURES:{name:"procedures",url:"/procedures",urlWithHash:"/#/procedures"},DIAGNOSTICS:{name:"diagnostic_tests",url:"/diagnostic_tests",urlWithHash:"/#/diagnostic_tests"},DRUGS:{name:"drugs",url:"/drugs",urlWithHash:"/#/drugs"},CONTACT_US:{name:"contact_us",url:"/contact_us",urlWithHash:"/#/contact_us"}},mocks:{PROD:{getProcedureAttachmentWrapperList:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getProcedureAttachmentWrapperList.json"),getChargeCode:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getChargeCode.json"),getChargeCodeSchedule:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getChargeCodeSchedule.json"),getUnbundling:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getUnbundling.json"),getChaptersDescription:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getChaptersDescription.json"),getMaximaBenefit:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getMaximaBenefit.json"),getChargeCodeSiteHelpText:window.$SFDCServerSideRenderedConfig.resourceBaseUrl.concat("/statics/PROD/getChargeCodeSiteHelpText.json")}}},window.$SFDCServerSideRenderedConfig)).config(["APP_CONFIG","$logProvider","$compileProvider",function(e,t,a){"use strict";a.debugInfoEnabled(e.debugInfoEnabled),t.debugEnabled(e.debugLogEnabled)}]).run(["APP_CONFIG","$log",function(e,t){"use strict";t.debug("APP_CONFIG.debugInfoEnabled: ",e.debugInfoEnabled),t.debug("APP_CONFIG.debugLogEnabled: ",e.debugLogEnabled)}]),angular.module("bupa.common",["ngSanitize","bupa.common.browserversion","bupa.common.translations","bupa.common.navbar","bupa.common.footer"]),angular.module("bupa.common").filter("bpSceTrustAsHtml",["$sce",function(e){"use strict";return e.trustAsHtml}]),angular.module("bupa.common").directive("dynamic",["$compile",function(e){"use strict";return{restrict:"A",replace:!0,scope:{dynamic:"&"},link:function(t,a){a.html(t.dynamic()),e(a.contents())(t)}}}]),angular.module("bupa.common.browserversion",[]).service("bpBrowserVersion",["$window",function(e){"use strict";this.checkBrowserVersion=function(){function t(){var t="",a=0;"Internet Explorer"===e.bowser.name?(t="IE",a=parseInt(e.bowser.version)):"Firefox"===e.bowser.name?(t=e.bowser.name,a=parseInt(e.bowser.version)):"Opera"===e.bowser.name&&(t=e.bowser.name),("IE"===t&&7>=a||"Firefox"===t&&4>a||"Opera"===t)&&e.jQuery("#browserMessage").show()}e.jQuery.noConflict(),e.jQuery(document).ready(function(){e.jQuery("#browserMessage").hide(),t()})}}]),angular.module("bupa",["config","bupa.core","ui.router"]).config(["$locationProvider",function(e){"use strict";e.html5Mode(!0)}]).run(["$log","APP_CONFIG",function(e,t){"use strict";e.debug("Running application: "+t.name)}]),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/Appendices.html",'<div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">Appendices</h2></div><div class="modal-body" style="padding:20px;text-align:left;font-family: Arial,Helvetica,Sans-Serif !important"><apex:repeat value="{!additionalInformation}" var="info"><apex:outputtext rendered="{!info.Type__c == \'Appendix\'}"><h3>{!info.Chapter_Name__c}</h3><p>{!info.Chapter_Information__c}</p><br/><br/></apex:outputtext></apex:repeat></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()" style="float:right">Close</button></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/common/footer/Footer.html",'<div ng-controller="BpFooterCtrl"><div class="bupaFooter"><div class="contact"><h1>{{ \'FooterProvidersTitle\' | translate}}</h1><p style="margin-top:0">{{\'FooterProviderHealthcareTeam\' | translate}}</p><div class="contactOptions"><ul class="contactList clearfix"><li class="call last backgroundUrlPhonePng" style="padding-left:50px"><div class="bupaFooterContactLiHeading">{{\'FooterProviderHealthcareTeamPhone\' | translate}}</div><div class="smaller bupaFooterContactLiDetails">{{\'FooterProviderHealthcareTeamOpeningHoursWeekday\' | translate}}<br/>{{\'FooterProviderHealthcareTeamOpeningHoursWeekend\' | translate}}</div></li></ul></div><h1>{{\'FooterCustomersTitle\' | translate}}</h1><p style="margin-top:0">{{\'FooterCustomerServiceTeam\' | translate}}</p><div class="contactOptions"><ul class="contactList clearfix"><li class="call backgroundUrlPhonePng" style="padding-left:50px"><div class="small">{{\'FooterCustomerServiceTeamPersonal\' | translate}}</div><div class="bupaFooterContactLiHeading">{{\'FooterCustomerServicePersonalTeamPhone\' | translate}}</div><div class="smaller bupaFooterContactLiDetails">{{\'FooterCustomerServicePersonalOpeningHoursWeekday\' | translate}}<br/>{{\'FooterCustomerServicePersonalOpeningHoursWeekend\' | translate}}</div></li><li class="call backgroundUrlPhonePng" style="padding-left:50px"><div class="small">{{\'FooterCustomerServiceTeamCompany\' | translate}}</div><div class="bupaFooterContactLiHeading">{{\'FooterCustomerServiceCompanyTeamPhone\' | translate}}</div><div class="smaller bupaFooterContactLiDetails">{{\'FooterCustomerServiceCompanyOpeningHoursWeekday\' | translate}}<br/>{{\'FooterCustomerServiceCompanyOpeningHoursWeekend\' | translate}}</div></li><li class="call last backgroundUrlPhonePng" style="padding-left:50px"><div class="small">{{\'FooterCustomerServiceTeamCorporate\' | translate}}</div><div class="bupaFooterContactLiHeading">{{\'FooterCustomerServiceCorporateTeamPhone\' | translate}}</div><div class="smaller bupaFooterContactLiDetails">{{\'FooterCustomerServiceCorporateOpeningHoursWeekday\' | translate}}<br/>{{\'FooterCustomerServiceCorporateOpeningHoursWeekend\' | translate}}</div></li></ul><h4 style="font-weight: bold">{{\'FooterCustomerServiceCallRecordingSafeGuard\' | translate}}</h4></div></div></div><div class="disclaimer"><p style="padding-bottom:10px; padding-top:10px">{{\'FooterDisclaimer\' | translate}}</p></div><div class="footnotesLinks clearfix"><ul><li><a rel="new-window" target="_blank" title="{{\'FooterLinkTooltipBupaHomePage\' | translate}}" ng-href="{{\'FooterLinkUrlBupaHomePage\' | translate}}">{{\'FooterLinkLabelBupaHomePage\' | translate}}</a></li><li><a rel="new-window" target="_blank" title="{{\'FooterLinkTooltipBupaAccessibilityPage\' | translate}}" ng-href="{{\'FooterLinkUrlBupaAccessibilityPage\' | translate}}">{{\'FooterLinkLabelBupaAccessibilityPage\' | translate}}</a></li><li><a rel="new-window" target="_blank" title="{{\'FooterLinkTooltipBupaLegalNoticesPage\' | translate}}" ng-href="{{\'FooterLinkUrlBupaLegalNoticesPage\' | translate}}">{{\'FooterLinkLabelBupaLegalNoticesPage\' | translate}}</a></li><li><a rel="new-window" target="_blank" title="{{\'FooterLinkTooltipBupaCopyrightPage\' | translate}}" ng-href="{{\'FooterLinkUrlBupaCopyrightPage\' | translate}}">{{\'FooterLinkLabelBupaCopyrightPage\' | translate}}</a></li></ul></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/common/navbar/NavBar.html",'<header role="banner"><div id="bupaContentHeader" ng-controller="NavBarCtrl"><a id="home" href="http://www.bupa.co.uk">Home</a><ul class="nav nav-pills pull-right" id="bupaNav"><li ng-class="{ active: $state.includes(APP_CONFIG.states.HOME.name) }"><a ng-href="{{APP_CONFIG.states.HOME.urlWithHash}}">{{ \'NavBarLinkHome\' | translate }}</a></li><li ng-class="{ active: $state.includes(APP_CONFIG.states.PROCEDURES.name) }"><a ng-href="{{APP_CONFIG.states.PROCEDURES.urlWithHash}}">{{ \'NavBarLinkProcedure\' | translate }}</a></li><li ng-class="{ active: $state.includes(APP_CONFIG.states.DIAGNOSTICS.name) }"><a ng-href="{{APP_CONFIG.states.DIAGNOSTICS.urlWithHash}}">{{ \'NavBarLinkDiagnostic\' | translate }}</a></li><li ng-class="{ active: $state.includes(APP_CONFIG.states.DRUGS.name) }"><a ng-href="{{APP_CONFIG.states.DRUGS.urlWithHash}}">{{ \'NavBarLinkDrugs\' | translate }}</a></li></ul><div style="margin-left: 130px"><h1 class="{{bupaNavBarClasses}}" style="text-transform:none; margin: .67em 0;font-size: 2em; font-weight: bold">{{ titleTextKey | translate }}</h1></div></div></header>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/appendices/Appendices.html",'<div ng-controller="AppendicesCtrl"><div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">Appendices</h2></div><div cg-busy="fetchPromise" class="modal-body" style="padding:20px;text-align:left;font-family: Arial,Helvetica,Sans-Serif !important"><div ng-repeat="appendix in appendices"><h3 dynamic="appendix.Chapter_Name__c"></h3><p dynamic="appendix.Chapter_Information__c"></p><br/><br/></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()" style="float:right">Close</button></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/benefit-maxima/BenefitMaxima.html",'<div ng-controller="BenefitMaximaCtrl"><div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">Guide to Bupa benefit maxima</h2><p>The tables below provide details of the maximum reimbursement for surgeons\' and anaesthetists\' fees.</p></div><div cg-busy="fetchPromise" class="modal-body" style="padding:20px;text-align:left"><table class="table"><thead><tr><th>Surgeons</th><th ng-repeat="pos in lengthBenefit">{{pos}}</th></tr></thead><tbody><tr ng-repeat="(name, benefitObj) in maximaBenefits"><td>{{benefitObj[1].Name.split(\' \')[0]}}</td><td ng-repeat="pos in lengthBenefit">£{{benefitObj[pos].Surgeons_Price__c}}</td></tr></tbody></table>Please note that some procedures reflect a lower complexity than Minor 1 and are reimbursed at £50.<table class="table"><thead><tr><th>Anaesthetists</th><th ng-repeat="pos in lengthBenefit">{{pos}}</th></tr></thead><tbody><tr ng-repeat="(name, benefitObj) in maximaBenefits"><td>{{benefitObj[1].Name.split(\' \')[0]}}</td><td ng-repeat="pos in lengthBenefit">£{{benefitObj[pos].Anaesthetists_Price__c}}</td></tr></tbody></table></div><div class="modal-footer"><div style="display:table-row"><div style="text-align:left; display:table-cell;padding-right:20px">If you have any questions please call Bupa Provider Services on 08457 55 33 33. Lines are open 8am to 8pm, Monday to Friday and 8am to 1pm on Saturday. Calls may be recorded and may be monitored.</div><div style="display:table-cell"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/essential-notes/EssentialNotes.html",'<div ng-controller="EssentialNotesCtrl"><div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">Essential Notes to the schedule</h2><p>These Essential Notes should be used in conjunction with the Bupa Schedule of Procedures to explain its content in greater detail.</p></div><div cg-busy="fetchPromise" class="modal-body" style="padding:20px;text-align:left;font-family: Arial,Helvetica,Sans-Serif !important"><div ng-repeat="essentialNote in essentialNotes"><h3 dynamic="essentialNote.Chapter_Name__c"></h3><p dynamic="essentialNote.Chapter_Information__c" class="bpEssentialNoteChapterInformation"></p><br/><br/></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()" style="float:right">Close</button></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/contact-us/ContactUs.html",'<bp-nav-bar title-text-key="\'NavBarLinkContactUs\'"></bp-nav-bar><div id="bupaContent"><form novalidate name="feedbackFormCtrl" ng-submit="onContactUsFormSubmit(feedback, feedbackFormCtrl)" id="theForm"><div class="panel panel-default" id="bupaContainer"><h3>Please complete the following form:</h3><br/><div class="form-horizontal" id="bupaContactForm"><div ng-class="{\'has-error\': feedbackFormCtrl.Title__c.$invalid && (feedbackFormCtrl.Title__c.$touched || feedbackFormCtrl.$submitted),\n                        \'has-success\': feedbackFormCtrl.Title__c.$valid && (feedbackFormCtrl.Title__c.$touched || feedbackFormCtrl.$submitted)\n                        }" class="form-group has-feedback"><label class="col-sm-2 control-label">Title</label><div class="col-sm-10 col-lg-9"><select ng-model="feedback.websiteContact__C.Title__c" ng-options="title as title for title in [\'Mr.\',\'Mrs.\',\'Ms.\',\'Miss.\',\'Mx.\',\'Dr.\',\'Prof.\']" ng-required="true" name="Title__c" class="form-control"><option value="">-- Select a title --</option></select><span style="right: 25px" ng-if="feedbackFormCtrl.Title__c.$invalid && (feedbackFormCtrl.Title__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-remove"></span> <span style="right: 25px" ng-if="feedbackFormCtrl.Title__c.$valid && (feedbackFormCtrl.Title__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-ok"></span></div></div><div ng-class="{\'has-error\': feedbackFormCtrl.FirstName__c.$invalid && (feedbackFormCtrl.FirstName__c.$touched || feedbackFormCtrl.$submitted),\n                        \'has-success\': feedbackFormCtrl.FirstName__c.$valid && (feedbackFormCtrl.FirstName__c.$touched || feedbackFormCtrl.$submitted)\n                        }" class="form-group has-feedback"><label class="col-sm-2 control-label">First name</label><div class="col-sm-10 col-lg-9"><input ng-model="feedback.websiteContact__C.FirstName__c" ng-required="true" name="FirstName__c" class="form-control"/> <span ng-if="feedbackFormCtrl.FirstName__c.$invalid && (feedbackFormCtrl.FirstName__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-remove"></span> <span ng-if="feedbackFormCtrl.FirstName__c.$valid && (feedbackFormCtrl.FirstName__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-ok"></span></div></div><div ng-class="{\'has-error\': feedbackFormCtrl.Name.$invalid && (feedbackFormCtrl.Name.$touched || feedbackFormCtrl.$submitted),\n                        \'has-success\': feedbackFormCtrl.Name.$valid && (feedbackFormCtrl.Name.$touched || feedbackFormCtrl.$submitted)\n                        }" class="form-group has-feedback"><label class="col-sm-2 control-label">Last name</label><div class="col-sm-10 col-lg-9"><input ng-model="feedback.websiteContact__C.Name" ng-required="true" name="Name" class="form-control"/> <span ng-if="feedbackFormCtrl.Name.$invalid && (feedbackFormCtrl.Name.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-remove"></span> <span ng-if="feedbackFormCtrl.Name.$valid && (feedbackFormCtrl.Name.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-ok"></span></div></div><div ng-class="{\'has-error\': feedbackFormCtrl.Email__c.$invalid && (feedbackFormCtrl.Email__c.$touched || feedbackFormCtrl.$submitted),\n                        \'has-success\': feedbackFormCtrl.Email__c.$valid && (feedbackFormCtrl.Email__c.$touched || feedbackFormCtrl.$submitted)\n                        }" class="form-group has-feedback"><label class="col-sm-2 control-label">Email</label><div class="col-sm-10 col-lg-9"><input ng-model="feedback.websiteContact__C.Email__c" ng-required="true" type="email" name="Email__c" class="form-control"/> <span ng-if="feedbackFormCtrl.Email__c.$invalid && (feedbackFormCtrl.Email__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-remove"></span> <span ng-if="feedbackFormCtrl.Email__c.$valid && (feedbackFormCtrl.Email__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-ok"></span></div></div><div ng-class="{\'has-error\': feedbackFormCtrl.Description__c.$invalid && (feedbackFormCtrl.Description__c.$touched || feedbackFormCtrl.$submitted),\n                        \'has-success\': feedbackFormCtrl.Description__c.$valid && (feedbackFormCtrl.Description__c.$touched || feedbackFormCtrl.$submitted)\n                        }" class="form-group has-feedback"><label class="col-sm-2 control-label">Comments</label><div class="col-sm-10 col-lg-9"><textarea ng-model="feedback.websiteRequest__C.Description__c" ng-required="true" name="Description__c" class="form-control" rows="5">\n            </textarea><span ng-if="feedbackFormCtrl.Description__c.$invalid && (feedbackFormCtrl.Description__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-remove"></span> <span ng-if="feedbackFormCtrl.Description__c.$valid && (feedbackFormCtrl.Description__c.$touched || feedbackFormCtrl.$submitted)" class="form-control-feedback glyphicon glyphicon-ok"></span></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-2"><button type="submit" class="btn btn-default">Submit</button></div><div class="col-sm-6 col-lg-7"><div ng-if="feedbackFormCtrl.$submitted && feedbackFormCtrl.$invalid" class="alert alert-danger">There are some errors in the data you\'ve entered. Please correct the fields marked as invalid and try submitting the form again.</div><div ng-if="requestSucceded === false && feedbackFormCtrl.$submitted && feedbackFormCtrl.$valid" class="alert alert-danger"><i class="glyphicon glyphicon-exclamation-sign"></i> We could not process your request, due to a technical error. Please try refreshing the page.</div><div ng-if="requestSucceded === true && feedbackFormCtrl.$submitted && feedbackFormCtrl.$valid" class="alert alert-success">Thank you! Your submission was successful.</div></div></div></div></div></form><div ng-include="\'/bupa/common/footer/Footer.html\'" role="banner"></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/diagnostics/Diagnostics.html",'<style>.loadingDivClass {\n    position: absolute;\n    top: 0;\n    background-color: grey;\n    width: 100%;\n    height: 1200px;\n    opacity: 0.6;\n  }\n\n  .loadingImg {\n    position: absolute;\n    top: 200px;\n    left: 48%;\n  }\n\n  .loadingText {\n    color: #FFF;\n    font-size: 18px;\n    position: relative;\n    top: 50px;\n  }\n\n  #bupaNav a {\n    color: black;\n  }\n\n  #bupaNav .active a {\n    color: #428bca;\n    font-weight: bold;\n    background-color: transparent;\n  }\n\n  #bupaNav .active a:hover {\n    text-decoration: none !important;\n    cursor: default !important;\n  }\n\n  #bupaNav a:hover {\n    background-color: transparent;\n    color: #428bca;\n  }\n\n  .mainheadeSection {\n    background: #6c6e71;\n    padding: 10px;\n    position: relative;\n    margin: 20px 0 10px 0;\n    display: block;\n\n  }\n\n  .mainheadeSection h1 {\n    font-size: 1.6em;\n    font-weight: normal;\n    margin-top: 5px;\n    margin-bottom: 10px;\n    padding-bottom: 5px;\n    color: #fff;\n\n  }\n\n  .mainheadeSectionAction {\n    background: #fff;\n    padding: 10px;\n    display: block;\n  }</style><bp-nav-bar title-text-key="\'DiagnosticHeaderTitle\'"></bp-nav-bar><div id="bupaContent"><div class="mainheadeSection"><h1>Diagnostic tests code search tool</h1><div class="mainheadeSectionAction"><div class="patientDetails" id="divInvoiceDetails"><div><p class="text">Start typing in the search box or browse by chapter to find your desired code.</p></div><br/><table><tr><td style="width:40%"><label ng-show="!isChapterShow">Search by diagnostic tests code or by keyword eg blood</label><input id="searchBoxProcedure" class="form-control" name="searchBoxProcedure" ng-model="filter" style="width: 40%" ng-show="!isChapterShow" value=""/><br/><label>Search by chapter</label><select ng-model="chapterNumber" ng-change="showChapter(chapterNumber);" ng-options="chapter.number as chapter.val for chapter in allChapters | orderBy: sortChapters"></select><br/><p style="font-size: 16px; font-weight: bold; padding-top: 50px" ng-hide="isChapterShow||hideOnInit">We have found {{tableParams.total()}} results for \'{{filter}}\'</p><div ng-show="isChapterShow" style="font-weight:bold;font-style:italic"><button class="whiteCta" style="text-underline:none;font-style:normal" ng-click="clearSelection();">Clear Selection</button></div><br/><br/><h2 ng-show="isChapterShow" style="padding-top:40px">{{currentChapter}}</h2><p ng-show="isChapterShow" ng-bind-html="allChaptersDescription[currentChapter]"/></td></tr></table><table ng-table="tableParams" class="table" ng-hide="hideOnInit"><thead><tr><th>{{ \'ChargeCodeCFieldsNameLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Name\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsDescriptionCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Description__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsSpecimenTypeCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Specimen_type__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsSectionNameCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Section_Name__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th ng-if="chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c">{{ \'OpdtPricesDiagnosticTestsTableHeader\' | translate}} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'OPDT_Pricing\'].HelpText__c}}" tooltip-append-to-body="true"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>Unbundling <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Unbundlings\'].HelpText__c}}" tooltip-append-to-body="true"><i class="glyphicon glyphicon-question-sign"></i></a></th></tr></thead><tbody bindonce="group" ng-repeat="group in $groups"><tr class="ng-table-group" bo-if="isChapterShow"><td colspan="10"><a ng-click="group.$hideRows = !group.$hideRows" ng-init="group.$hideRows=true"><span class="glyphicon" ng-class="{ \'glyphicon-chevron-right\': group.$hideRows, \'glyphicon-chevron-down\': !group.$hideRows }"></span> <strong><span bo-text="group.value"></span></strong></a></td></tr><tr ng-hide="group.$hideRows" ng-repeat="codeCharge in group.data" class="animate-showTD" bo-class="{\n                                    \'oldPublishedCode\': codeCharge.Published_Code__c&& codeCharge.Publish_Date__c<_6MonthsAgo,\n                                    \'soonPublishedCode\': !codeCharge.Published_Code__c&& codeCharge.Publish_Date__c>=_2MonthsAgo,\n                                    \'unpublished\': !codeCharge.Published_Code__c&& codeCharge.Unpublish_Date__c>=_2MonthsAgo\n                                }"><td><span bo-text="codeCharge.Name"></span><br/><a bo-if="codeCharge.Footnote_i__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_i__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_i__c"></span></a> <a bo-if="codeCharge.Footnote_ii__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_ii__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_ii__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_asterisk_read_only_for_SOP__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_R__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_X__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c}}"><span bo-text="codeCharge.OPDT_code__c"></span></a></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Description__c"></span></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Specimen_type__c"></span></td><td bo-if="!codeCharge.isSubSection" dynamic="codeCharge.chapters"></td><td bo-if="chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c"><a bo-if="codeCharge.OPDT_code__c === \'OPDT\'" data-content-template="/bupa/core/opdt-pricing/OpdtPricing.html" bs-modal="{{ {chargeCode: codeCharge} }}"><i class="glyphicon glyphicon-chevron-right"></i> View</a> <span bo-if="codeCharge.OPDT_code__c !== \'OPDT\'">-</span></td><td bo-if="!codeCharge.isSubSection"><a bo-if="allUnbundling[codeCharge.Id].length > 0" data-content-template="/bupa/core/unbundling/Unbundling.html" bs-modal="showUnbundling(codeCharge)" ng-click="getUnbundlingCode(codeCharge)"><span class="glyphicon" ng-class="{ \'glyphicon-chevron-right\': !showSubSection[codeCharge.index], \'glyphicon-chevron-down\': showSubSection[codeCharge.index] }"></span> View</a></td></tr></tbody></table><p ng-show="isChapterShow||!hideOnInit"><strong>Page:</strong> {{ tableParams.page() }}</p></div></div></div><bp-useful-documents hide-appendices="true" hide-benefit-maxima="true" attachment-wrappers="diagnosticAttachments"></bp-useful-documents><bp-useful-links></bp-useful-links><div ng-include="\'/bupa/common/footer/Footer.html\'" role="banner"></div></div>')
}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/home/Home.html",'<bp-nav-bar bupa-nav-bar-classes="bupaHeaderHomePage" title-text-key="\'HomeHeaderTitle\'"></bp-nav-bar><br/><br/><div id="bupaContent"><div class="alert alert-info" id="browserMessage" style="display:none"><strong>Browser Warning:</strong> <span ng-bind-html="\'HomeBrowserWarning\' | translate | bpSceTrustAsHtml"></span></div><div><table id="bupaSelection"><tr><td class="bpHomeSelectionTd"><div><h2 ng-bind-html="\'HomeSelectLabelProcedure\' | translate | bpSceTrustAsHtml"></h2><p ng-bind-html="\'HomeDescriptionProcedure\' | translate | bpSceTrustAsHtml"></p></div></td><td class="bpHomeSelectionTd" style="border-left: 1px solid #d0cece"><div><h2 ng-bind-html="\'HomeSelectLabelDiagnostic\' | translate | bpSceTrustAsHtml"></h2><p ng-bind-html="\'HomeDescriptionDiagnostic\' | translate | bpSceTrustAsHtml"></p></div></td></tr><tr><td class="bpHomeSelectionTd"><a id="bupabtn" ng-href="{{ APP_CONFIG.states.PROCEDURES.urlWithHash }}">{{ \'HomeGoToSearch\' | translate }}</a></td><td class="bpHomeSelectionTd" style="border-left: 1px solid #d0cece"><a id="bupabtn" ng-href="{{ APP_CONFIG.states.DIAGNOSTICS.urlWithHash }}">{{ \'HomeGoToSearch\' | translate }}</a></td></tr><tr class="break-column"><td></td></tr><tr><td class="bpHomeSelectionTd"><div><h2 ng-bind-html="\'HomeSelectLabelDrugs\' | translate | bpSceTrustAsHtml"></h2><p ng-bind-html="\'HomeDescriptionDrugs\' | translate | bpSceTrustAsHtml"></p></div></td></tr><tr><td class="bpHomeSelectionTd"><a id="bupabtn" ng-href="{{ APP_CONFIG.states.DRUGS.urlWithHash }}">{{ \'HomeGoToSearch\' | translate }}</a></td></tr></table></div><br/><div class="bupaFooter"><div class="descBox"><p ng-bind-html="\'HomeCCSDMessage\' | translate | bpSceTrustAsHtml" class="bupaDescBoxFirstParagraph"></p></div></div><br/><div ng-include="\'/bupa/common/footer/Footer.html\'" role="banner"></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/drugs/Drugs.html",'<style>.loadingDivClass {\n    position: absolute;\n    top: 0;\n    background-color: grey;\n    width: 100%;\n    height: 1200px;\n    opacity: 0.6;\n  }\n\n  .loadingImg {\n    position: absolute;\n    top: 200px;\n    left: 48%;\n  }\n\n  .loadingText {\n    color: #FFF;\n    font-size: 18px;\n    position: relative;\n    top: 50px;\n  }\n\n  #bupaNav a {\n    color: black;\n  }\n\n  #bupaNav .active a {\n    color: #428bca;\n    font-weight: bold;\n    background-color: transparent;\n  }\n\n  #bupaNav .active a:hover {\n    text-decoration: none !important;\n    cursor: default !important;\n  }\n\n  #bupaNav a:hover {\n    background-color: transparent;\n    color: #428bca;\n  }\n\n  .mainheadeSection {\n    background: #6c6e71;\n    padding: 10px;\n    position: relative;\n    margin: 20px 0 10px 0;\n    display: block;\n\n  }\n\n  .mainheadeSection h1 {\n    font-size: 1.6em;\n    font-weight: normal;\n    margin-top: 5px;\n    margin-bottom: 10px;\n    padding-bottom: 5px;\n    color: #fff;\n\n  }\n\n  .mainheadeSectionAction {\n    background: #fff;\n    padding: 10px;\n    display: block;\n  }</style><bp-nav-bar title-text-key="\'DrugsHeaderTitle\'"></bp-nav-bar><div id="bupaContent"><div class="mainheadeSection"><h1>Drug code schedules search tool</h1><div class="mainheadeSectionAction"><div class="patientDetails" id="divInvoiceDetails"><div><p class="text">Start typing in the search box or browse by chapter to find your desired code.</p></div><br/><table><tr><td style="width:40%"><label ng-show="!isChapterShow">Search by drug code or by keyword</label><input id="searchBoxProcedure" class="form-control" name="searchBoxProcedure" ng-model="filter" style="width: 40%" ng-show="!isChapterShow" value=""/><br/><label>Search by chapter</label><select ng-model="chapterNumber" ng-change="showChapter(chapterNumber);" ng-options="chapter.number as chapter.val for chapter in allChapters | orderBy: sortChapters"></select><br/><p style="font-size: 16px; font-weight: bold; padding-top: 50px" ng-hide="isChapterShow||hideOnInit">We have found {{tableParams.total()}} results for \'{{filter}}\'</p><div ng-show="isChapterShow" style="font-weight:bold;font-style:italic"><button class="whiteCta" style="text-underline:none;font-style:normal" ng-click="clearSelection();">Clear Selection</button></div><br/><br/><h2 ng-show="isChapterShow" style="padding-top:40px">{{currentChapter}}</h2><p ng-show="isChapterShow" ng-bind-html="allChaptersDescription[currentChapter]"/></td></tr></table><table ng-table="tableParams" class="table" ng-hide="hideOnInit"><thead><tr><th>{{ \'ChargeCodeCFieldsNameLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Name\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsDescriptionCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Description__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsSectionNameCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Section_Name__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsDrugDoseCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Drug_dose__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsCancerOnlyCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Cancer_Only__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsPreAuthorizationCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Pre_Authorisation_required_Drugs__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th></tr></thead><tbody bindonce="group" ng-repeat="group in $groups"><tr class="ng-table-group" bo-if="isChapterShow"><td colspan="10"><a ng-click="group.$hideRows = !group.$hideRows" ng-init="group.$hideRows=true"><span class="glyphicon" ng-class="{ \'glyphicon-chevron-right\': group.$hideRows, \'glyphicon-chevron-down\': !group.$hideRows }"></span> <strong><span bo-text="group.value"></span></strong></a></td></tr><tr ng-hide="group.$hideRows" ng-repeat="codeCharge in group.data" class="animate-showTD" bo-class="{\n                                    \'oldPublishedCode\': codeCharge.Published_Code__c&& codeCharge.Publish_Date__c<_6MonthsAgo,\n                                    \'soonPublishedCode\': !codeCharge.Published_Code__c&& codeCharge.Publish_Date__c>=_2MonthsAgo,\n                                    \'unpublished\': !codeCharge.Published_Code__c&& codeCharge.Unpublish_Date__c>=_2MonthsAgo\n                                }"><td><span bo-text="codeCharge.Name"></span><br/><a bo-if="codeCharge.Footnote_i__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_i__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_i__c"></span></a> <a bo-if="codeCharge.Footnote_ii__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_ii__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_ii__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_asterisk_read_only_for_SOP__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_R__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_X__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'OPDT_code__c\'].HelpText__c}}"><span bo-text="codeCharge.OPDT_code__c"></span></a></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Description__c"></span></td><td bo-if="!codeCharge.isSubSection" dynamic="codeCharge.chapters"></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Drug_dose__c"></span></td><td bo-if="!codeCharge.isSubSection"><span bo-if="codeCharge.Cancer_Only__c">Yes</span> <span bo-if="!codeCharge.Cancer_Only__c">No</span></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Pre_Authorisation_required_Drugs__c"></span></td></tr></tbody></table><p ng-show="isChapterShow||!hideOnInit"><strong>Page:</strong> {{ tableParams.page() }}</p></div></div></div><bp-useful-documents hide-appendices="true" hide-benefit-maxima="true" attachment-wrappers="diagnosticAttachments"></bp-useful-documents><bp-useful-links></bp-useful-links><div ng-include="\'/bupa/common/footer/Footer.html\'" role="banner"></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/opdt-pricing/OpdtPricing.html",'<div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">{{ \'OpdtPricesModalTitle\' | translate | bpSceTrustAsHtml}}</h2><br/><p ng-bind-html="\'OpdtPricesModalSubTitle\' | translate  | bpSceTrustAsHtml"></p></div><div class="modal-body" style="text-align:left;padding: 0 20px 20px"><h3 style="font-size: 20px">{{\'OpdtPricesModalTableTitle\' | translate}} {{chargeCode.Name}} {{chargeCode.Description__c}}</h3><table class="bpOpdtPricingTable table"><thead><tr><th>{{ \'ChargeCodeCFieldsNameLabel\' | translate}}</th><th>{{ \'ChargeCodeCFieldsDescriptionCLabel\' | translate}}</th><th class="text-center">{{ \'OpdtPricesModalColumnHeaderLondonPrice\' | translate}}</th><th class="text-center">{{ \'OpdtPricesModalColumnHeaderOutsideLondonPrice\' | translate}}</th></tr></thead><tbody><tr><td style="width:60px">{{chargeCode.Name}}</td><td ng-bind-html="chargeCode.Description__c"></td><td ng-bind-html="chargeCode.London_Price_OPDT__c | currency: \'£\'" class="text-center"></td><td ng-bind-html="chargeCode.Outside_London_Price_OPDT__c | currency: \'£\'" class="text-center"></td></tr></tbody></table></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/unbundling/Unbundling.html",'<div class="modal-header" style="text-align:left"><button type="button" class="close" ng-click="$hide()">&times;</button><h2 class="modal-title">{{ \'UnbundlingModuleTitle\' | translate }}</h2><p ng-bind-html="\'UnbundlingModuleSubtitle\' | translate  | bpSceTrustAsHtml"></p></div><div class="modal-body" style="padding:20px;text-align:left;padding-top:0px"><h3 style="font-size: 20px">Unacceptable combination(s) for {{unbundlingCode}} {{unbundlingDesc}}</h3><table class="table"><thead><tr><th>Code</th><th>{{ \'ChargeCodeCFieldsDescriptionCLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsSurgeonsCategoryCLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsAnaesthetistsCategoryCLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsHospitalCategoryCLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsAnticipatedLOSCLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsICLevel2CLabel\' | translate }}</th><th>{{ \'ChargeCodeCFieldsICLevel3CLabel\' | translate }}</th></tr></thead><tbody><tr ng-repeat="item in items"><td>{{item.UnbundlingChargeCode__r.Name}}</td><td>{{item.UnbundlingChargeCode__r.Description__c}}</td><td style="width:100px"><span bo-show="item.Surgeons_Category__c!=\'Cash Value\'"><span bo-text="item.UnbundlingChargeCode__r.Surgeons_Category__c"/><br/></span><br/><span bo-show="item.UnbundlingChargeCode__r.Surgeons_Category__c!=\'-\'">£<span bo-text="item.UnbundlingChargeCode__r.Surgeon_Price__c"/></span></td><td style="width:100px"><span bo-show="item.Anaesthetists_Category__c!=\'Cash Value\'"><span bo-text="item.UnbundlingChargeCode__r.Anaesthetists_Category__c"/><br/></span><br/><span bo-show="item.UnbundlingChargeCode__r.Anaesthetists_Category__c!=\'-\'">£<span bo-text="item.UnbundlingChargeCode__r.Anaesthetist_Price__c"/></span></td><td>{{item.UnbundlingChargeCode__r.Hospital_Category__c}}</td><td><span bo-text="item.UnbundlingChargeCode__r.Anticipated_LOS__c" bo-show="item.UnbundlingChargeCode__r.Anticipated_LOS__c !== \'O/P\' && item.UnbundlingChargeCode__r.Anticipated_LOS__c !== \'D/C\'"/></td><td style="width:60px">{{item.UnbundlingChargeCode__r.IC_Level_2__c}}</td><td style="width:60px">{{item.UnbundlingChargeCode__r.IC_Level_3__c}}</td><td>&nbsp;</td></tr></tbody></table></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/procedures/Procedures.html",'<bp-nav-bar title-text-key="\'ProcedureHeaderTitle\'"></bp-nav-bar><style>#bupaNav a {\n    color: black;\n  }\n\n  #bupaNav .active a {\n    color: #428bca;\n    font-weight: bold;\n    background-color: transparent;\n  }\n\n  #bupaNav .active a:hover {\n    text-decoration: none !important;\n    cursor: default !important;\n  }\n\n  #bupaNav a:hover {\n    background-color: transparent;\n    color: #428bca;\n  }\n\n  .mainheadeSection {\n    background: #6c6e71;\n    padding: 10px;\n    position: relative;\n    margin: 20px 0 10px 0;\n    display: block;\n\n  }\n\n  .mainheadeSection h1 {\n    font-size: 1.6em;\n    font-weight: normal;\n    margin-top: 5px;\n    margin-bottom: 10px;\n    padding-bottom: 5px;\n    color: #fff;\n\n  }\n\n  .mainheadeSectionAction {\n    background: #fff;\n    padding: 10px;\n    display: block;\n  }\n\n  .btn-info, .btn-info:hover, .btn-info[disabled], .btn-info[disabled]:hover, #calcButton, #loadingButton {\n    background-color: #3071A9;\n    border-color: #3071A9;\n  }\n\n  .bold {\n    font-weight: bold;\n  }</style><style>#bupaNav a {\n    color: black;\n  }\n\n  #bupaNav .active a {\n    color: #428bca;\n    font-weight: bold;\n    background-color: transparent;\n  }\n\n  #bupaNav .active a:hover {\n    text-decoration: none !important;\n    cursor: default !important;\n  }\n\n  #bupaNav a:hover {\n    background-color: transparent;\n    color: #428bca;\n  }\n\n  #bupaSelection table {\n\n  }\n\n  #bupaSelection td {\n    width: 50%;\n    background-color: white;\n  }</style><div id="bupaContent"><div class="mainheadeSection"><h1>Procedure code search tool</h1><div class="mainheadeSectionAction"><table style="border: 1px solid grey"><tr><td ng-bind-html="\'Fee_Checker_HelpText\' | translate | bpSceTrustAsHtml" style="padding-left:15px; padding-top:10px; padding-bottom:10px"></td><td style="padding-top:10px; padding-right: 10px"><button class="btn btn-primary" ng-click="toggleShoppingCart()"><i class="glyphicon glyphicon-shopping-cart"></i> Fee checker <span class="badge ng-binding">{{purchasedCodeCharges.length}}</span></button></td></tr></table><br/><br/><br/><div style="border: 1px solid" class="hidden" id="shoppingCartDiv"><br/><div class="container-fluid"><div class="row"><div class="col-xs-1">I\'m a/an</div><div class="col-xs-4"><select ng-model="defaultService" ng-change="getServiceType(defaultService.ServiceName);" ng-options="service.ServiceName for service in services " required></select></div></div></div><br/><div class="divider"></div><div class="container-fluid"><div class="row"><div class="col-xs-1 bold">Code</div><div class="col-xs-4 bold">Description</div><div class="col-xs-1 bold" style="text-align:center">Fee</div><div class="col-xs-1 bold" style="text-align:center">Adjusted fee</div><div class="col-xs-4 bold">Message</div><div class="col-xs-1"><button ng-click="clearCart(); closeShoppingCart();" class="btn btn-danger btn-xs" style="padding-left:5px; padding-right:5px">Clear</button></div></div></div><div class="divider"></div><div id="showBeforeCalculated" class="container-fluid" ng-show="!Calculated" class="ng-hide"><div class="row" ng-repeat="cc in purchasedCodeCharges track by $index" style="margin-top:5px"><div class="col-xs-1" dynamic="cc.displayedName"></div><div class="col-xs-4">{{cc.Description__c}}&nbsp;</div><div class="col-xs-1" ng-hide="(cc[defaultService.PriceField]==null)" style="text-align:center">{{cc[defaultService.PriceField] | currency: \'£\'}}</div><div class="col-xs-1" ng-hide="!(cc[defaultService.PriceField]==null)" style="text-align:center">{{0 | currency: \'£\'}}</div><div class="col-xs-1" style="text-align:center">{{cc.adjustedPrice | currency: \'£\'}}</div><div class="col-xs-4">{{cc.messageText | bpSceTrustAsHtml}}</div><div class="col-xs-1"><button ng-click="removeItem(cc)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span></button></div></div></div><div id="showAfterCalculated" class="container-fluid" ng-show="Calculated"><div class="row" ng-repeat="cc in viewResult track by $index" style="margin-top:5px"><div class="col-xs-1" dynamic="cc.code"></div><div class="col-xs-4">{{cc.Description}}&nbsp;</div><div class="col-xs-1" ng-hide="(cc[defaultService.CalculatedPriceField]==null)" style="text-align:center">{{cc[defaultService.CalculatedPriceField] | currency: \'£\'}}</div><div class="col-xs-1" ng-hide="!(cc[defaultService.CalculatedPriceField]==null)" style="text-align:center">{{0 | currency: \'£\'}}</div><div class="col-xs-1" style="text-align:center">{{cc.adjustedPrice | currency: \'£\'}}</div><div class="col-xs-4">{{cc.messageText | bpSceTrustAsHtml}}</div><div class="col-xs-1"><button ng-click="removeCaluclatedItem(cc)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span></button></div></div></div><br/><div class="divider"></div><div class="container-fluid"><div class="row"><div class="col-xs-1 bold"></div><div class="col-xs-4 bold"></div><div class="col-xs-1 bold" style="text-align:center">Total</div><div class="col-xs-1 bold" style="text-align:center">{{total | currency: \'£\'}}</div><div class="col-xs-4 bold"></div></div></div><br/><div class="divider"></div><div class="container-fluid"><div class="col-xs-5"></div><div class="col-xs-2"><button id="calcButton" ng-hide="loading" class="btn btn-info btn-xs btn-block" ng-click="shoppingCartCalcFull(purchasedCodeCharges)" style="height:26px;font-size: 12px">Calculate Fee</button> <button id="loadingButton" ng-show="loading" class="btn btn-info btn-xs btn-block" style="height:26px;font-size: 12px" disabled>Loading...</button></div></div><br/></div><br/><div class="patientDetails" cg-busy="bpProceduresCtrlFetch" id="divInvoiceDetails"><div><p class="text">Start typing in the search box or browse by chapter to find your desired code.</p></div><br/><table><tr><td style="width:40%"><label ng-show="!isChapterShow">Search by procedure code or by keyword eg knee</label><input id="searchBoxProcedure" class="form-control" name="searchBoxProcedure" ng-model="filter" ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': APP_CONFIG.minimumDelayInMsBetweenCodeSearch, \'blur\': 0} }" style="width: 40%" ng-show="!isChapterShow" value=""/><br/><label>Search by chapter</label><select ng-model="chapterNumber" ng-change="chapters.showChapter(chapterNumber); closeShoppingCart();" ng-options="chapter.number as chapter.val for chapter in allChapters|orderBy: sortChapters"></select><br/><p style="font-size: 16px; font-weight: bold; padding-top: 50px" ng-hide="isChapterShow||hideOnInit">We have found {{tableParams.total()}} results for \'{{filter}}\'</p><div ng-show="isChapterShow" style="font-weight:bold;font-style:italic"><button class="whiteCta" style="text-underline:none;font-style:normal" ng-click="clearSelection();">Clear Selection</button></div><br/><br/><h2 ng-show="isChapterShow" style="padding-top:40px">{{currentChapter}}</h2><p ng-show="isChapterShow" ng-bind-html="allChaptersDescription[currentChapter]"></p></td></tr></table><table ng-table="tableParams" class="table" ng-hide="hideOnInit"><thead><tr><th>{{ \'ChargeCodeCFieldsNameLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Name\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsDescriptionCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Description__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeScheduleCFieldsSectionNameCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Section_Name__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsSurgeonsCategoryCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Surgeons_Category__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsAnaesthetistsCategoryCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Anaesthetists_Category__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsHospitalCategoryCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Hospital_Category__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsAnticipatedLOSCLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Anticipated_LOS__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsICLevel2CLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'IC_Level_2__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>{{ \'ChargeCodeCFieldsICLevel3CLabel\' | translate }} <a tooltip="{{chargeCodeSiteHelpTextCMap[\'IC_Level_3__c\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>Unbundling <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Unbundlings\'].HelpText__c}}"><i class="glyphicon glyphicon-question-sign"></i></a></th><th>Add <a tooltip="{{chargeCodeSiteHelpTextCMap[\'Add\'].HelpText__c}}" tooltip-append-to-body="true"><i class="glyphicon glyphicon-question-sign"></i></a></th></tr></thead><tbody bindonce="group" ng-repeat="group in $groups"><tr class="ng-table-group" bo-if="isChapterShow"><td colspan="10"><a ng-click="group.$hideRows = !group.$hideRows" ng-init="group.$hideRows=true"><span class="glyphicon" ng-class="{ \'glyphicon-chevron-right\': group.$hideRows, \'glyphicon-chevron-down\': !group.$hideRows }"></span> <strong><span bo-text="group.value"/></strong></a></td></tr><tr ng-hide="group.$hideRows" ng-repeat="codeCharge in group.data" class="animate-showTD" bo-class="{\n                                    \'oldPublishedCode\': codeCharge.Published_Code__c&& codeCharge.Publish_Date__c<_6MonthsAgo,\n                                    \'soonPublishedCode\': !codeCharge.Published_Code__c&& codeCharge.Publish_Date__c>=_2MonthsAgo,\n                                    \'unpublished\': !codeCharge.Published_Code__c&& codeCharge.Unpublish_Date__c>=_2MonthsAgo\n                                }"><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Name"></span><br/><a bo-if="codeCharge.Footnote_i__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_i__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_i__c"></span></a> <a bo-if="codeCharge.Footnote_ii__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_ii__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_ii__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_Asterik__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_asterisk_read_only_for_SOP__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_R__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_R__c"></span></a> <a bo-if="chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c" tooltip="{{chargeCodeSiteHelpTextCMap[\'Footnote_X__c\'].HelpText__c}}"><span bo-text="codeCharge.Footnote_X__c"></span></a></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Description__c"></span></td><td bo-if="!codeCharge.isSubSection" dynamic="codeCharge.chapters"></td><td bo-if="!codeCharge.isSubSection"><span bo-show="codeCharge.Surgeons_Category__c!=\'Cash Value\'"><span bo-text="codeCharge.Surgeons_Category__c"></span><br/></span> <span bo-show="codeCharge.Surgeons_Category__c!=\'-\'">£<span bo-text="codeCharge.Surgeon_Price__c"></span></span></td><td bo-if="!codeCharge.isSubSection"><span bo-show="codeCharge.Anaesthetists_Category__c!=\'Cash Value\'"><span bo-text="codeCharge.Anaesthetists_Category__c"></span><br/></span> <span bo-show="codeCharge.Anaesthetists_Category__c!=\'-\'">£<span bo-text="codeCharge.Anaesthetist_Price__c"></span></span></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.Hospital_Category__c"></span></td><td bo-if="!codeCharge.isSubSection"><a bo-if="codeCharge.Anticipated_LOS__c === \'D/C\'" tooltip="{{chargeCodeSiteHelpTextCMap[\'D/C\'].HelpText__c}}"><span ng-bind="codeCharge.Anticipated_LOS__c"></span></a> <a bo-if="codeCharge.Anticipated_LOS__c === \'O/P\'" tooltip="{{chargeCodeSiteHelpTextCMap[\'O/P\'].HelpText__c}}"><span ng-bind="codeCharge.Anticipated_LOS__c"></span></a> <span bo-text="codeCharge.Anticipated_LOS__c" bo-show="codeCharge.Anticipated_LOS__c !== \'O/P\' && codeCharge.Anticipated_LOS__c !== \'D/C\'"></span></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.IC_Level_2__c"></span></td><td bo-if="!codeCharge.isSubSection"><span bo-text="codeCharge.IC_Level_3__c"></span></td><td bo-if="!codeCharge.isSubSection"><a bo-if="allUnbundling[codeCharge.Id].length > 0" data-content-template="/bupa/core/unbundling/Unbundling.html" bs-modal="showUnbundling(codeCharge)" ng-click="getUnbundlingCode(codeCharge)"><span class="glyphicon" ng-class="{ \'glyphicon-chevron-right\': !showSubSection[codeCharge.index],\n                        \'glyphicon-chevron-down\': showSubSection[codeCharge.index] }"></span> View</a></td><td><div ng-click="openShoppingCart();"><a bo-if="(codeCharge.Anaesthetist_Price__c == null && codeCharge.Surgeon_Price__c == null)" tooltip="{{ \'ProcedureToolTip\' | translate }}" tooltip-append-to-body="true"><button class="btn btn-default btn-xs" ng-click="addItem(codeCharge);">+</button></a> <button class="btn btn-default btn-xs" ng-click="addItem(codeCharge);" ng-hide="(codeCharge.Anaesthetist_Price__c == null && codeCharge.Surgeon_Price__c == null)">+</button></div></td></tr></tbody></table><p ng-show="isChapterShow||!hideOnInit"><strong>Page:</strong> {{ tableParams.page() }}</p></div></div></div><bp-useful-documents attachment-wrappers="procedureAttachments"></bp-useful-documents><bp-useful-links></bp-useful-links><div ng-include="\'/bupa/common/footer/Footer.html\'" role="banner"></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/useful-links/UsefulLinks.html",'<div class="bupaFooter"><div class="usefulDocs"><h1>Useful links</h1><p>More links and additional information for the Bupa codes.</p><ul cg-busy="usefulLinksCtrlFetch"><li ng-repeat="usefulLink in usefulLinks"><a rel="new-window" target="_blank" tooltip="Opens in a new window" ng-href="{{usefulLink.Value__c}}">{{usefulLink.Name}}</a></li></ul></div></div>')}])}(),function(e){try{e=angular.module("bupa-templates")}catch(t){e=angular.module("bupa-templates",[])}e.run(["$templateCache",function(e){e.put("/bupa/core/useful-documents/UsefulDocuments.html",'<div class="bupaFooter"><div class="usefulDocs"><h1>Useful documents</h1><p>The links below provide downloads and additional information for the Bupa codes.</p><div class="contactOptions"><ul class="clearfix"><li ng-repeat="attachmentWrapper in attachmentWrappers"><a ng-href="/servlet/servlet.FileDownload?file={{attachmentWrapper.attachment.Id}}" target="_blank">{{attachmentWrapper.attachment.Name}} ></a><br/><span>({{attachmentWrapper.attachment.fileType}}, {{attachmentWrapper.attachment.fileSizeInKB}}KB)</span></li><li><a ng-if="hideBenefitMaxima !== true" data-animation="am-fade-and-slide-top" data-content-template="/bupa/core/benefit-maxima/BenefitMaxima.html" bs-modal="modal">Benefit maxima ></a><br/><span>&nbsp;</span></li><li><a ng-if="hideEssentialNotes !== true" data-animation="am-fade-and-slide-top" data-content-template="/bupa/core/essential-notes/EssentialNotes.html" bs-modal="modal">Essential notes ></a><br/><span>&nbsp;</span></li><li><a ng-if="hideAppendices !== true" data-animation="am-fade-and-slide-top" data-content-template="/bupa/core/appendices/Appendices.html" bs-modal="modal">Appendices ></a><br/><span>&nbsp;</span></li></ul></div></div></div>')}])}();